(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ps={},wh={exports:{}},M={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=Symbol.for("react.element"),Kc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),Jc=Symbol.for("react.strict_mode"),Yc=Symbol.for("react.profiler"),Qc=Symbol.for("react.provider"),td=Symbol.for("react.context"),ed=Symbol.for("react.forward_ref"),id=Symbol.for("react.suspense"),nd=Symbol.for("react.memo"),rd=Symbol.for("react.lazy"),Ca=Symbol.iterator;function sd(i){return i===null||typeof i!="object"?null:(i=Ca&&i[Ca]||i["@@iterator"],typeof i=="function"?i:null)}var Th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eh=Object.assign,Ph={};function Xe(i,e,n){this.props=i,this.context=e,this.refs=Ph,this.updater=n||Th}Xe.prototype.isReactComponent={};Xe.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Xe.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Ih(){}Ih.prototype=Xe.prototype;function Is(i,e,n){this.props=i,this.context=e,this.refs=Ph,this.updater=n||Th}var Ss=Is.prototype=new Ih;Ss.constructor=Is;Eh(Ss,Xe.prototype);Ss.isPureReactComponent=!0;var Aa=Array.isArray,Sh=Object.prototype.hasOwnProperty,Ls={current:null},Lh={key:!0,ref:!0,__self:!0,__source:!0};function bh(i,e,n){var s,a={},u=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(u=""+e.key),e)Sh.call(e,s)&&!Lh.hasOwnProperty(s)&&(a[s]=e[s]);var _=arguments.length-2;if(_===1)a.children=n;else if(1<_){for(var p=Array(_),v=0;v<_;v++)p[v]=arguments[v+2];a.children=p}if(i&&i.defaultProps)for(s in _=i.defaultProps,_)a[s]===void 0&&(a[s]=_[s]);return{$$typeof:zi,type:i,key:u,ref:l,props:a,_owner:Ls.current}}function od(i,e){return{$$typeof:zi,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function bs(i){return typeof i=="object"&&i!==null&&i.$$typeof===zi}function ad(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(n){return e[n]})}var xa=/\/+/g;function $r(i,e){return typeof i=="object"&&i!==null&&i.key!=null?ad(""+i.key):e.toString(36)}function Cn(i,e,n,s,a){var u=typeof i;(u==="undefined"||u==="boolean")&&(i=null);var l=!1;if(i===null)l=!0;else switch(u){case"string":case"number":l=!0;break;case"object":switch(i.$$typeof){case zi:case Kc:l=!0}}if(l)return l=i,a=a(l),i=s===""?"."+$r(l,0):s,Aa(a)?(n="",i!=null&&(n=i.replace(xa,"$&/")+"/"),Cn(a,e,n,"",function(v){return v})):a!=null&&(bs(a)&&(a=od(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(xa,"$&/")+"/")+i)),e.push(a)),1;if(l=0,s=s===""?".":s+":",Aa(i))for(var _=0;_<i.length;_++){u=i[_];var p=s+$r(u,_);l+=Cn(u,e,n,p,a)}else if(p=sd(i),typeof p=="function")for(i=p.call(i),_=0;!(u=i.next()).done;)u=u.value,p=s+$r(u,_++),l+=Cn(u,e,n,p,a);else if(u==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function En(i,e,n){if(i==null)return i;var s=[],a=0;return Cn(i,s,"","",function(u){return e.call(n,u,a++)}),s}function hd(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(n){(i._status===0||i._status===-1)&&(i._status=1,i._result=n)},function(n){(i._status===0||i._status===-1)&&(i._status=2,i._result=n)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var mt={current:null},An={transition:null},ud={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:An,ReactCurrentOwner:Ls};M.Children={map:En,forEach:function(i,e,n){En(i,function(){e.apply(this,arguments)},n)},count:function(i){var e=0;return En(i,function(){e++}),e},toArray:function(i){return En(i,function(e){return e})||[]},only:function(i){if(!bs(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};M.Component=Xe;M.Fragment=Xc;M.Profiler=Yc;M.PureComponent=Is;M.StrictMode=Jc;M.Suspense=id;M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ud;M.cloneElement=function(i,e,n){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var s=Eh({},i.props),a=i.key,u=i.ref,l=i._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,l=Ls.current),e.key!==void 0&&(a=""+e.key),i.type&&i.type.defaultProps)var _=i.type.defaultProps;for(p in e)Sh.call(e,p)&&!Lh.hasOwnProperty(p)&&(s[p]=e[p]===void 0&&_!==void 0?_[p]:e[p])}var p=arguments.length-2;if(p===1)s.children=n;else if(1<p){_=Array(p);for(var v=0;v<p;v++)_[v]=arguments[v+2];s.children=_}return{$$typeof:zi,type:i.type,key:a,ref:u,props:s,_owner:l}};M.createContext=function(i){return i={$$typeof:td,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:Qc,_context:i},i.Consumer=i};M.createElement=bh;M.createFactory=function(i){var e=bh.bind(null,i);return e.type=i,e};M.createRef=function(){return{current:null}};M.forwardRef=function(i){return{$$typeof:ed,render:i}};M.isValidElement=bs;M.lazy=function(i){return{$$typeof:rd,_payload:{_status:-1,_result:i},_init:hd}};M.memo=function(i,e){return{$$typeof:nd,type:i,compare:e===void 0?null:e}};M.startTransition=function(i){var e=An.transition;An.transition={};try{i()}finally{An.transition=e}};M.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};M.useCallback=function(i,e){return mt.current.useCallback(i,e)};M.useContext=function(i){return mt.current.useContext(i)};M.useDebugValue=function(){};M.useDeferredValue=function(i){return mt.current.useDeferredValue(i)};M.useEffect=function(i,e){return mt.current.useEffect(i,e)};M.useId=function(){return mt.current.useId()};M.useImperativeHandle=function(i,e,n){return mt.current.useImperativeHandle(i,e,n)};M.useInsertionEffect=function(i,e){return mt.current.useInsertionEffect(i,e)};M.useLayoutEffect=function(i,e){return mt.current.useLayoutEffect(i,e)};M.useMemo=function(i,e){return mt.current.useMemo(i,e)};M.useReducer=function(i,e,n){return mt.current.useReducer(i,e,n)};M.useRef=function(i){return mt.current.useRef(i)};M.useState=function(i){return mt.current.useState(i)};M.useSyncExternalStore=function(i,e,n){return mt.current.useSyncExternalStore(i,e,n)};M.useTransition=function(){return mt.current.useTransition()};M.version="18.2.0";wh.exports=M;var ld=wh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd=ld,dd=Symbol.for("react.element"),fd=Symbol.for("react.fragment"),pd=Object.prototype.hasOwnProperty,_d=cd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,md={key:!0,ref:!0,__self:!0,__source:!0};function Ch(i,e,n){var s,a={},u=null,l=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)pd.call(e,s)&&!md.hasOwnProperty(s)&&(a[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:dd,type:i,key:u,ref:l,props:a,_owner:_d.current}}Ps.Fragment=fd;Ps.jsx=Ch;Ps.jsxs=Ch;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},gd=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[n++];e[s++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[n++],l=i[n++],_=i[n++],p=((a&7)<<18|(u&63)<<12|(l&63)<<6|_&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],l=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(u&63)<<6|l&63)}}return e.join("")},xh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const u=i[a],l=a+1<i.length,_=l?i[a+1]:0,p=a+2<i.length,v=p?i[a+2]:0,E=u>>2,I=(u&3)<<4|_>>4;let F=(_&15)<<2|v>>6,Q=v&63;p||(Q=64,l||(F=64)),s.push(n[E],n[I],n[F],n[Q])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ah(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):gd(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const u=n[i.charAt(a++)],_=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const I=a<i.length?n[i.charAt(a)]:64;if(++a,u==null||_==null||v==null||I==null)throw new vd;const F=u<<2|_>>4;if(s.push(F),v!==64){const Q=_<<4&240|v>>2;if(s.push(Q),I!==64){const tt=v<<6&192|I;s.push(tt)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class vd extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yd=function(i){const e=Ah(i);return xh.encodeByteArray(e,!0)},Mn=function(i){return yd(i).replace(/\./g,"")},kh=function(i){try{return xh.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=()=>wd().__FIREBASE_DEFAULTS__,Ed=()=>{if(typeof process>"u"||typeof process.env>"u")return;const i={}.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Pd=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&kh(i[1]);return e&&JSON.parse(e)},Cs=()=>{try{return Td()||Ed()||Pd()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Oh=i=>{var e,n;return(n=(e=Cs())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},Id=i=>{const e=Oh(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Rh=()=>{var i;return(i=Cs())===null||i===void 0?void 0:i.config},Mh=i=>{var e;return(e=Cs())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i),_="";return[Mn(JSON.stringify(n)),Mn(JSON.stringify(l)),_].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function Cd(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Ad(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xd(){const i=dt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function kd(){try{return typeof indexedDB=="object"}catch{return!1}}function Od(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="FirebaseError";class Qt extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Rd,Object.setPrototypeOf(this,Qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ui.prototype.create)}}class Ui{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,u=this.errors[e],l=u?Md(u,s):"Error",_=`${this.serviceName}: ${l} (${a}).`;return new Qt(a,_,s)}}function Md(i,e){return i.replace(Nd,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const Nd=/\{\$([^}]+)}/g;function Dd(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Nn(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const u=i[a],l=e[a];if(ka(u)&&ka(l)){if(!Nn(u,l))return!1}else if(u!==l)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function ka(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Bd(i,e){const n=new zd(i,e);return n.subscribe.bind(n)}class zd{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Ud(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=Wr),a.error===void 0&&(a.error=Wr),a.complete===void 0&&(a.complete=Wr);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ud(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Wr(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(i){return i&&i._delegate?i._delegate:i}class Le{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Sd;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hd(e))try{this.getOrInitializeService({instanceIdentifier:Te})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});s.resolve(u)}catch{}}}}clearInstance(e=Te){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Te){return this.instances.has(e)}getOptions(e=Te){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,l]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(u);s===_&&l.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(a,u);const l=this.instances.get(a);return l&&e(l,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Zd(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Te){return this.component?this.component.multipleInstances?e:Te:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zd(i){return i===Te?void 0:i}function Hd(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Z||(Z={}));const Vd={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},$d=Z.INFO,Wd={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Gd=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=Wd[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class As{constructor(e){this.name=e,this._logLevel=$d,this._logHandler=Gd,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const qd=(i,e)=>e.some(n=>i instanceof n);let Oa,Ra;function Kd(){return Oa||(Oa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xd(){return Ra||(Ra=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nh=new WeakMap,ss=new WeakMap,Dh=new WeakMap,Gr=new WeakMap,xs=new WeakMap;function Jd(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",l)},u=()=>{n(he(i.result)),a()},l=()=>{s(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Nh.set(n,i)}).catch(()=>{}),xs.set(e,i),e}function Yd(i){if(ss.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",l),i.removeEventListener("abort",l)},u=()=>{n(),a()},l=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",l),i.addEventListener("abort",l)});ss.set(i,e)}let os={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return ss.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Dh.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return he(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Qd(i){os=i(os)}function tf(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(qr(this),e,...n);return Dh.set(s,e.sort?e.sort():[e]),he(s)}:Xd().includes(i)?function(...e){return i.apply(qr(this),e),he(Nh.get(this))}:function(...e){return he(i.apply(qr(this),e))}}function ef(i){return typeof i=="function"?tf(i):(i instanceof IDBTransaction&&Yd(i),qd(i,Kd())?new Proxy(i,os):i)}function he(i){if(i instanceof IDBRequest)return Jd(i);if(Gr.has(i))return Gr.get(i);const e=ef(i);return e!==i&&(Gr.set(i,e),xs.set(e,i)),e}const qr=i=>xs.get(i);function nf(i,e,{blocked:n,upgrade:s,blocking:a,terminated:u}={}){const l=indexedDB.open(i,e),_=he(l);return s&&l.addEventListener("upgradeneeded",p=>{s(he(l.result),p.oldVersion,p.newVersion,he(l.transaction),p)}),n&&l.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),_.then(p=>{u&&p.addEventListener("close",()=>u()),a&&p.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),_}const rf=["get","getKey","getAll","getAllKeys","count"],sf=["put","add","delete","clear"],Kr=new Map;function Ma(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Kr.get(e))return Kr.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=sf.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||rf.includes(n)))return;const u=async function(l,..._){const p=this.transaction(l,a?"readwrite":"readonly");let v=p.store;return s&&(v=v.index(_.shift())),(await Promise.all([v[n](..._),a&&p.done]))[0]};return Kr.set(e,u),u}Qd(i=>({...i,get:(e,n,s)=>Ma(e,n)||i.get(e,n,s),has:(e,n)=>!!Ma(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(af(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function af(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const as="@firebase/app",Na="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be=new As("@firebase/app"),hf="@firebase/app-compat",uf="@firebase/analytics-compat",lf="@firebase/analytics",cf="@firebase/app-check-compat",df="@firebase/app-check",ff="@firebase/auth",pf="@firebase/auth-compat",_f="@firebase/database",mf="@firebase/database-compat",gf="@firebase/functions",vf="@firebase/functions-compat",yf="@firebase/installations",wf="@firebase/installations-compat",Tf="@firebase/messaging",Ef="@firebase/messaging-compat",Pf="@firebase/performance",If="@firebase/performance-compat",Sf="@firebase/remote-config",Lf="@firebase/remote-config-compat",bf="@firebase/storage",Cf="@firebase/storage-compat",Af="@firebase/firestore",xf="@firebase/firestore-compat",kf="firebase",Of="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]",Rf={[as]:"fire-core",[hf]:"fire-core-compat",[lf]:"fire-analytics",[uf]:"fire-analytics-compat",[df]:"fire-app-check",[cf]:"fire-app-check-compat",[ff]:"fire-auth",[pf]:"fire-auth-compat",[_f]:"fire-rtdb",[mf]:"fire-rtdb-compat",[gf]:"fire-fn",[vf]:"fire-fn-compat",[yf]:"fire-iid",[wf]:"fire-iid-compat",[Tf]:"fire-fcm",[Ef]:"fire-fcm-compat",[Pf]:"fire-perf",[If]:"fire-perf-compat",[Sf]:"fire-rc",[Lf]:"fire-rc-compat",[bf]:"fire-gcs",[Cf]:"fire-gcs-compat",[Af]:"fire-fst",[xf]:"fire-fst-compat","fire-js":"fire-js",[kf]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new Map,us=new Map;function Mf(i,e){try{i.container.addComponent(e)}catch(n){be.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ge(i){const e=i.name;if(us.has(e))return be.debug(`There were multiple attempts to register component ${e}.`),!1;us.set(e,i);for(const n of Dn.values())Mf(n,i);return!0}function ks(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ue=new Ui("app","Firebase",Nf);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Le("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ue.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=Of;function Os(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:hs,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw ue.create("bad-app-name",{appName:String(a)});if(n||(n=Rh()),!n)throw ue.create("no-options");const u=Dn.get(a);if(u){if(Nn(n,u.options)&&Nn(s,u.config))return u;throw ue.create("duplicate-app",{appName:a})}const l=new jd(a);for(const p of us.values())l.addComponent(p);const _=new Df(n,s,l);return Dn.set(a,_),_}function Bh(i=hs){const e=Dn.get(i);if(!e&&i===hs&&Rh())return Os();if(!e)throw ue.create("no-app",{appName:i});return e}function le(i,e,n){var s;let a=(s=Rf[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const u=a.match(/\s|\//),l=e.match(/\s|\//);if(u||l){const _=[`Unable to register library "${a}" with version "${e}":`];u&&_.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&l&&_.push("and"),l&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),be.warn(_.join(" "));return}Ge(new Le(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="firebase-heartbeat-database",zf=1,Li="firebase-heartbeat-store";let Xr=null;function zh(){return Xr||(Xr=nf(Bf,zf,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Li)}}}).catch(i=>{throw ue.create("idb-open",{originalErrorMessage:i.message})})),Xr}async function Uf(i){try{return await(await zh()).transaction(Li).objectStore(Li).get(Uh(i))}catch(e){if(e instanceof Qt)be.warn(e.message);else{const n=ue.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});be.warn(n.message)}}}async function Da(i,e){try{const s=(await zh()).transaction(Li,"readwrite");await s.objectStore(Li).put(e,Uh(i)),await s.done}catch(n){if(n instanceof Qt)be.warn(n.message);else{const s=ue.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});be.warn(s.message)}}}function Uh(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=1024,Zf=30*24*60*60*1e3;class Hf{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vf(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Ba();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(l=>l.date===u)))return this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const _=new Date(l.date).valueOf();return Date.now()-_<=Zf}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ba(),{heartbeatsToSend:s,unsentEntries:a}=jf(this._heartbeatsCache.heartbeats),u=Mn(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}}function Ba(){return new Date().toISOString().substring(0,10)}function jf(i,e=Ff){const n=[];let s=i.slice();for(const a of i){const u=n.find(l=>l.agent===a.agent);if(u){if(u.dates.push(a.date),za(n)>e){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),za(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Vf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kd()?Od().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Uf(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Da(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Da(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function za(i){return Mn(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(i){Ge(new Le("platform-logger",e=>new of(e),"PRIVATE")),Ge(new Le("heartbeat",e=>new Hf(e),"PRIVATE")),le(as,Na,i),le(as,Na,"esm2017"),le("fire-js","")}$f("");var Wf="firebase",Gf="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */le(Wf,Gf,"app");function Rs(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(n[s[a]]=i[s[a]]);return n}function Fh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qf=Fh,Zh=new Ui("auth","Firebase",Fh());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new As("@firebase/auth");function Kf(i,...e){Bn.logLevel<=Z.WARN&&Bn.warn(`Auth (${Ye}): ${i}`,...e)}function xn(i,...e){Bn.logLevel<=Z.ERROR&&Bn.error(`Auth (${Ye}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(i,...e){throw Ms(i,...e)}function zt(i,...e){return Ms(i,...e)}function Xf(i,e,n){const s=Object.assign(Object.assign({},qf()),{[e]:n});return new Ui("auth","Firebase",s).create(e,{appName:i.name})}function Ms(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Zh.create(i,...e)}function A(i,e,...n){if(!i)throw Ms(e,...n)}function Gt(i){const e="INTERNAL ASSERTION FAILED: "+i;throw xn(e),new Error(e)}function Jt(i,e){i||Gt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Jf(){return Ua()==="http:"||Ua()==="https:"}function Ua(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jf()||Cd()||"connection"in navigator)?navigator.onLine:!0}function Qf(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jt(n>e,"Short delay should be less than long delay!"),this.isMobile=bd()||Ad()}get(){return Yf()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(i,e){Jt(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new Zi(3e4,6e4);function Ds(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Qe(i,e,n,s,a={}){return jh(i,a,async()=>{let u={},l={};s&&(e==="GET"?l=s:u={body:JSON.stringify(s)});const _=Fi(Object.assign({key:i.config.apiKey},l)).slice(1),p=await i._getAdditionalHeaders();return p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode),Hh.fetch()(Vh(i,i.config.apiHost,n,_),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},u))})}async function jh(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},tp),e);try{const a=new np(i),u=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const l=await u.json();if("needConfirmation"in l)throw Pn(i,"account-exists-with-different-credential",l);if(u.ok&&!("errorMessage"in l))return l;{const _=u.ok?l.errorMessage:l.error.message,[p,v]=_.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pn(i,"credential-already-in-use",l);if(p==="EMAIL_EXISTS")throw Pn(i,"email-already-in-use",l);if(p==="USER_DISABLED")throw Pn(i,"user-disabled",l);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Xf(i,E,v);Xt(i,E)}}catch(a){if(a instanceof Qt)throw a;Xt(i,"network-request-failed",{message:String(a)})}}async function ip(i,e,n,s,a={}){const u=await Qe(i,e,n,s,a);return"mfaPendingCredential"in u&&Xt(i,"multi-factor-auth-required",{_serverResponse:u}),u}function Vh(i,e,n,s){const a=`${e}${n}?${s}`;return i.config.emulator?Ns(i.config,a):`${i.config.apiScheme}://${a}`}class np{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zt(this.auth,"network-request-failed")),ep.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pn(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=zt(i,e,s);return a.customData._tokenResponse=n,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(i,e){return Qe(i,"POST","/v1/accounts:delete",e)}async function sp(i,e){return Qe(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function op(i,e=!1){const n=Je(i),s=await n.getIdToken(e),a=Bs(s);A(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,l=u==null?void 0:u.sign_in_provider;return{claims:a,token:s,authTime:Ii(Jr(a.auth_time)),issuedAtTime:Ii(Jr(a.iat)),expirationTime:Ii(Jr(a.exp)),signInProvider:l||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Jr(i){return Number(i)*1e3}function Bs(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return xn("JWT malformed, contained fewer than 3 sections"),null;try{const a=kh(n);return a?JSON.parse(a):(xn("Failed to decode base64 JWT payload"),null)}catch(a){return xn("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function ap(i){const e=Bs(i);return A(e,"internal-error"),A(typeof e.exp<"u","internal-error"),A(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Qt&&hp(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function hp({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zn(i){var e;const n=i.auth,s=await i.getIdToken(),a=await bi(i,sp(n,{idToken:s}));A(a==null?void 0:a.users.length,n,"internal-error");const u=a.users[0];i._notifyReloadListener(u);const l=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?dp(u.providerUserInfo):[],_=cp(i.providerData,l),p=i.isAnonymous,v=!(i.email&&u.passwordHash)&&!(_!=null&&_.length),E=p?v:!1,I={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:_,metadata:new $h(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,I)}async function lp(i){const e=Je(i);await zn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cp(i,e){return[...i.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function dp(i){return i.map(e=>{var{providerId:n}=e,s=Rs(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(i,e){const n=await jh(i,{},async()=>{const s=Fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=i.config,l=Vh(i,a,"/v1/token",`key=${u}`),_=await i._getAdditionalHeaders();return _["Content-Type"]="application/x-www-form-urlencoded",Hh.fetch()(l,{method:"POST",headers:_,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pp(i,e){return Qe(i,"POST","/v2/accounts:revokeToken",Ds(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){A(e.idToken,"internal-error"),A(typeof e.idToken<"u","internal-error"),A(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ap(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return A(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:u}=await fp(e,n);this.updateTokensAndExpiration(s,a,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:u}=n,l=new Ci;return s&&(A(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),a&&(A(typeof a=="string","internal-error",{appName:e}),l.accessToken=a),u&&(A(typeof u=="number","internal-error",{appName:e}),l.expirationTime=u),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ci,this.toJSON())}_performRefresh(){return Gt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(i,e){A(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ie{constructor(e){var{uid:n,auth:s,stsTokenManager:a}=e,u=Rs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new up(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new $h(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await bi(this,this.stsTokenManager.getToken(this.auth,e));return A(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return op(this,e)}reload(){return lp(this)}_assign(e){this!==e&&(A(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ie(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){A(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await zn(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await bi(this,rp(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,a,u,l,_,p,v,E;const I=(s=n.displayName)!==null&&s!==void 0?s:void 0,F=(a=n.email)!==null&&a!==void 0?a:void 0,Q=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,tt=(l=n.photoURL)!==null&&l!==void 0?l:void 0,U=(_=n.tenantId)!==null&&_!==void 0?_:void 0,Ae=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Qi=(v=n.createdAt)!==null&&v!==void 0?v:void 0,ni=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ft,emailVerified:xe,isAnonymous:fe,providerData:pe,stsTokenManager:ri}=n;A(ft&&ri,e,"internal-error");const tn=Ci.fromJSON(this.name,ri);A(typeof ft=="string",e,"internal-error"),ne(I,e.name),ne(F,e.name),A(typeof xe=="boolean",e,"internal-error"),A(typeof fe=="boolean",e,"internal-error"),ne(Q,e.name),ne(tt,e.name),ne(U,e.name),ne(Ae,e.name),ne(Qi,e.name),ne(ni,e.name);const _e=new Ie({uid:ft,auth:e,email:F,emailVerified:xe,displayName:I,isAnonymous:fe,photoURL:tt,phoneNumber:Q,tenantId:U,stsTokenManager:tn,createdAt:Qi,lastLoginAt:ni});return pe&&Array.isArray(pe)&&(_e.providerData=pe.map(en=>Object.assign({},en))),Ae&&(_e._redirectEventId=Ae),_e}static async _fromIdTokenResponse(e,n,s=!1){const a=new Ci;a.updateFromServerResponse(n);const u=new Ie({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await zn(u),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new Map;function qt(i){Jt(i instanceof Function,"Expected a class definition");let e=Fa.get(i);return e?(Jt(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Fa.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Wh.type="NONE";const Za=Wh;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(i,e,n){return`firebase:${i}:${e}:${n}`}class je{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:u}=this.auth;this.fullUserKey=kn(this.userKey,a.apiKey,u),this.fullPersistenceKey=kn("persistence",a.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ie._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new je(qt(Za),e,s);const a=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=a[0]||qt(Za);const l=kn(s,e.config.apiKey,e.name);let _=null;for(const v of n)try{const E=await v._get(l);if(E){const I=Ie._fromJSON(e,E);v!==u&&(_=I),u=v;break}}catch{}const p=a.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new je(u,e,s):(u=p[0],_&&await u._set(l,_.toJSON()),await Promise.all(n.map(async v=>{if(v!==u)try{await v._remove(l)}catch{}})),new je(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kh(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gh(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jh(e))return"Blackberry";if(Yh(e))return"Webos";if(zs(e))return"Safari";if((e.includes("chrome/")||qh(e))&&!e.includes("edge/"))return"Chrome";if(Xh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Gh(i=dt()){return/firefox\//i.test(i)}function zs(i=dt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qh(i=dt()){return/crios\//i.test(i)}function Kh(i=dt()){return/iemobile/i.test(i)}function Xh(i=dt()){return/android/i.test(i)}function Jh(i=dt()){return/blackberry/i.test(i)}function Yh(i=dt()){return/webos/i.test(i)}function qn(i=dt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function _p(i=dt()){var e;return qn(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mp(){return xd()&&document.documentMode===10}function Qh(i=dt()){return qn(i)||Xh(i)||Yh(i)||Jh(i)||/windows phone/i.test(i)||Kh(i)}function gp(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(i,e=[]){let n;switch(i){case"Browser":n=Ha(dt());break;case"Worker":n=`${Ha(dt())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ye}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((l,_)=>{try{const p=e(u);l(p)}catch(p){_(p)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp(i,e={}){return Qe(i,"GET","/v2/passwordPolicy",Ds(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=6;class Tp{constructor(e){var n,s,a,u;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:wp,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,a,u,l,_;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(l=p.containsNumericCharacter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(_=p.containsNonAlphanumericCharacter)!==null&&_!==void 0?_:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ja(this),this.idTokenSubscription=new ja(this),this.beforeStateQueue=new vp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qt(n)),this._initializationPromise=this.queue(async()=>{var s,a;if(!this._deleted&&(this.persistenceManager=await je.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const s=await this.assertedPersistence.getCurrentUser();let a=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,_=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===_)&&(p!=null&&p.user)&&(a=p.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return A(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zn(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qf()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Je(e):null;return n&&A(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&A(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(qt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yp(this),n=new Tp(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ui("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await pp(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qt(e)||this._popupRedirectResolver;A(n,this,"argument-error"),this.redirectPersistenceManager=await je.create(this,[qt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let l=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(A(_,this,"internal-error"),_.then(()=>{l||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,a);return()=>{l=!0,p()}}else{const p=e.addObserver(n);return()=>{l=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return A(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Kf(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Us(i){return Je(i)}class ja{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bd(n=>this.observer=n)}get next(){return A(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}function Ip(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=a=>{const u=zt("internal-error");u.customData=a,n(u)},s.type="text/javascript",s.charset="UTF-8",Pp().appendChild(s)})}function Sp(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(i,e){const n=ks(i,"auth");if(n.isInitialized()){const a=n.getImmediate(),u=n.getOptions();if(Nn(u,e??{}))return a;Xt(a,"already-initialized")}return n.initialize({options:e})}function bp(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(qt);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Cp(i,e,n){const s=Us(i);A(s._canInitEmulator,s,"emulator-config-failed"),A(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!!(n!=null&&n.disableWarnings),u=eu(e),{host:l,port:_}=Ap(e),p=_===null?"":`:${_}`;s.config.emulator={url:`${u}//${l}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:l,port:_,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||xp()}function eu(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Ap(i){const e=eu(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const u=a[1];return{host:u,port:Va(s.substr(u.length+1))}}else{const[u,l]=s.split(":");return{host:u,port:Va(l)}}}function Va(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function xp(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gt("not implemented")}_getIdTokenResponse(e){return Gt("not implemented")}_linkToIdToken(e,n){return Gt("not implemented")}_getReauthenticationResolver(e){return Gt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ve(i,e){return ip(i,"POST","/v1/accounts:signInWithIdp",Ds(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="http://localhost";class Ce extends iu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ce(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=n,u=Rs(n,["providerId","signInMethod"]);if(!s||!a)return null;const l=new Ce(s,a);return l.idToken=u.idToken||void 0,l.accessToken=u.accessToken||void 0,l.secret=u.secret,l.nonce=u.nonce,l.pendingToken=u.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Ve(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ve(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ve(e,n)}buildRequest(){const e={requestUri:kp,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends nu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re extends Hi{constructor(){super("facebook.com")}static credential(e){return Ce._fromParams({providerId:re.PROVIDER_ID,signInMethod:re.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return re.credentialFromTaggedObject(e)}static credentialFromError(e){return re.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return re.credential(e.oauthAccessToken)}catch{return null}}}re.FACEBOOK_SIGN_IN_METHOD="facebook.com";re.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se extends Hi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ce._fromParams({providerId:se.PROVIDER_ID,signInMethod:se.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return se.credentialFromTaggedObject(e)}static credentialFromError(e){return se.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return se.credential(n,s)}catch{return null}}}se.GOOGLE_SIGN_IN_METHOD="google.com";se.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe extends Hi{constructor(){super("github.com")}static credential(e){return Ce._fromParams({providerId:oe.PROVIDER_ID,signInMethod:oe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oe.credentialFromTaggedObject(e)}static credentialFromError(e){return oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oe.credential(e.oauthAccessToken)}catch{return null}}}oe.GITHUB_SIGN_IN_METHOD="github.com";oe.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae extends Hi{constructor(){super("twitter.com")}static credential(e,n){return Ce._fromParams({providerId:ae.PROVIDER_ID,signInMethod:ae.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ae.credentialFromTaggedObject(e)}static credentialFromError(e){return ae.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ae.credential(n,s)}catch{return null}}}ae.TWITTER_SIGN_IN_METHOD="twitter.com";ae.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const u=await Ie._fromIdTokenResponse(e,s,a),l=$a(s);return new qe({user:u,providerId:l,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=$a(s);return new qe({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function $a(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Qt{constructor(e,n,s,a){var u;super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Un.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new Un(e,n,s,a)}}function ru(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Un._fromErrorAndOperation(i,u,e,s):u})}async function Op(i,e,n=!1){const s=await bi(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return qe._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rp(i,e,n=!1){const{auth:s}=i,a="reauthenticate";try{const u=await bi(i,ru(s,a,e,i),n);A(u.idToken,s,"internal-error");const l=Bs(u.idToken);A(l,s,"internal-error");const{sub:_}=l;return A(i.uid===_,s,"user-mismatch"),qe._forOperation(i,a,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Xt(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mp(i,e,n=!1){const s="signIn",a=await ru(i,s,e),u=await qe._fromIdTokenResponse(i,s,a);return n||await i._updateCurrentUser(u.user),u}function Np(i,e,n,s){return Je(i).onIdTokenChanged(e,n,s)}function Dp(i,e,n){return Je(i).beforeAuthStateChanged(e,n)}const Fn="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fn,"1"),this.storage.removeItem(Fn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){const i=dt();return zs(i)||qn(i)}const zp=1e3,Up=10;class ou extends su{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Bp()&&gp(),this.fallbackToPolling=Qh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,_,p)=>{this.notifyListeners(l,p)});return}const s=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(s);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!n)return}const a=()=>{const l=this.storage.getItem(s);!n&&this.localCache[s]===l||this.notifyListeners(s,l)},u=this.storage.getItem(s);mp()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Up):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},zp)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ou.type="LOCAL";const Fp=ou;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends su{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}au.type="SESSION";const hu=au;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new Kn(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:u}=n.data,l=this.handlersMap[a];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const _=Array.from(l).map(async v=>v(n.origin,u)),p=await Zp(_);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kn.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,l;return new Promise((_,p)=>{const v=Fs("",20);a.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);l={messageChannel:a,onMessage(I){const F=I;if(F.data.eventId===v)switch(F.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),_(F.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(l),a.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[a.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return window}function jp(i){Ut().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(){return typeof Ut().WorkerGlobalScope<"u"&&typeof Ut().importScripts=="function"}async function Vp(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $p(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function Wp(){return uu()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="firebaseLocalStorageDb",Gp=1,Zn="firebaseLocalStorage",cu="fbase_key";class ji{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xn(i,e){return i.transaction([Zn],e?"readwrite":"readonly").objectStore(Zn)}function qp(){const i=indexedDB.deleteDatabase(lu);return new ji(i).toPromise()}function cs(){const i=indexedDB.open(lu,Gp);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Zn,{keyPath:cu})}catch(a){n(a)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Zn)?e(s):(s.close(),await qp(),e(await cs()))})})}async function Wa(i,e,n){const s=Xn(i,!0).put({[cu]:e,value:n});return new ji(s).toPromise()}async function Kp(i,e){const n=Xn(i,!1).get(e),s=await new ji(n).toPromise();return s===void 0?null:s.value}function Ga(i,e){const n=Xn(i,!0).delete(e);return new ji(n).toPromise()}const Xp=800,Jp=3;class du{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cs(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Jp)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kn._getInstance(Wp()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Vp(),!this.activeServiceWorker)return;this.sender=new Hp(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$p()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cs();return await Wa(e,Fn,"1"),await Ga(e,Fn),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Wa(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Kp(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ga(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=Xn(a,!1).getAll();return new ji(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xp)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}du.type="LOCAL";const Yp=du;new Zi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(i,e){return e?qt(e):(A(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends iu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ve(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ve(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ve(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function t_(i){return Mp(i.auth,new Zs(i),i.bypassAuthState)}function e_(i){const{auth:e,user:n}=i;return A(n,e,"internal-error"),Rp(n,new Zs(i),i.bypassAuthState)}async function i_(i){const{auth:e,user:n}=i;return A(n,e,"internal-error"),Op(n,new Zs(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,s,a,u=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:u,error:l,type:_}=e;if(l){this.reject(l);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return t_;case"linkViaPopup":case"linkViaRedirect":return i_;case"reauthViaPopup":case"reauthViaRedirect":return e_;default:Xt(this.auth,"internal-error")}}resolve(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Zi(2e3,1e4);class Ze extends fu{constructor(e,n,s,a,u){super(e,n,a,u),this.provider=s,this.authWindow=null,this.pollId=null,Ze.currentPopupAction&&Ze.currentPopupAction.cancel(),Ze.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return A(e,this.auth,"internal-error"),e}async onExecution(){Jt(this.filter.length===1,"Popup operations only handle one event");const e=Fs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ze.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n_.get())};e()}}Ze.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="pendingRedirect",On=new Map;class s_ extends fu{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=On.get(this.auth._key());if(!e){try{const s=await o_(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}On.set(this.auth._key(),e)}return this.bypassAuthState||On.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o_(i,e){const n=u_(e),s=h_(i);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function a_(i,e){On.set(i._key(),e)}function h_(i){return qt(i._redirectPersistence)}function u_(i){return kn(r_,i.config.apiKey,i.name)}async function l_(i,e,n=!1){const s=Us(i),a=Qp(s,e),l=await new s_(s,a,n).execute();return l&&!n&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=10*60*1e3;class d_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f_(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!pu(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(zt(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c_&&this.cachedEventUids.clear(),this.cachedEventUids.has(qa(e))}saveEventToCache(e){this.cachedEventUids.add(qa(e)),this.lastProcessedEventTime=Date.now()}}function qa(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function pu({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f_(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pu(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p_(i,e={}){return Qe(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m_=/^https?/;async function g_(i){if(i.config.emulator)return;const{authorizedDomains:e}=await p_(i);for(const n of e)try{if(v_(n))return}catch{}Xt(i,"unauthorized-domain")}function v_(i){const e=ls(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const l=new URL(i);return l.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===s}if(!m_.test(n))return!1;if(__.test(i))return s===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Zi(3e4,6e4);function Ka(){const i=Ut().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function w_(i){return new Promise((e,n)=>{var s,a,u;function l(){Ka(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ka(),n(zt(i,"network-request-failed"))},timeout:y_.get()})}if(!((a=(s=Ut().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((u=Ut().gapi)===null||u===void 0)&&u.load)l();else{const _=Sp("iframefcb");return Ut()[_]=()=>{gapi.load?l():n(zt(i,"network-request-failed"))},Ip(`https://apis.google.com/js/api.js?onload=${_}`).catch(p=>n(p))}}).catch(e=>{throw Rn=null,e})}let Rn=null;function T_(i){return Rn=Rn||w_(i),Rn}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Zi(5e3,15e3),P_="__/auth/iframe",I_="emulator/auth/iframe",S_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b_(i){const e=i.config;A(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ns(e,I_):`https://${i.config.authDomain}/${P_}`,s={apiKey:e.apiKey,appName:i.name,v:Ye},a=L_.get(i.config.apiHost);a&&(s.eid=a);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Fi(s).slice(1)}`}async function C_(i){const e=await T_(i),n=Ut().gapi;return A(n,i,"internal-error"),e.open({where:document.body,url:b_(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S_,dontclear:!0},s=>new Promise(async(a,u)=>{await s.restyle({setHideOnLeave:!1});const l=zt(i,"network-request-failed"),_=Ut().setTimeout(()=>{u(l)},E_.get());function p(){Ut().clearTimeout(_),a(s)}s.ping(p).then(p,()=>{u(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x_=500,k_=600,O_="_blank",R_="http://localhost";class Xa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function M_(i,e,n,s=x_,a=k_){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let _="";const p=Object.assign(Object.assign({},A_),{width:s.toString(),height:a.toString(),top:u,left:l}),v=dt().toLowerCase();n&&(_=qh(v)?O_:n),Gh(v)&&(e=e||R_,p.scrollbars="yes");const E=Object.entries(p).reduce((F,[Q,tt])=>`${F}${Q}=${tt},`,"");if(_p(v)&&_!=="_self")return N_(e||"",_),new Xa(null);const I=window.open(e||"",_,E);A(I,i,"popup-blocked");try{I.focus()}catch{}return new Xa(I)}function N_(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="__/auth/handler",B_="emulator/auth/handler",z_=encodeURIComponent("fac");async function Ja(i,e,n,s,a,u){A(i.config.authDomain,i,"auth-domain-config-required"),A(i.config.apiKey,i,"invalid-api-key");const l={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Ye,eventId:a};if(e instanceof nu){e.setDefaultLanguage(i.languageCode),l.providerId=e.providerId||"",Dd(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries(u||{}))l[E]=I}if(e instanceof Hi){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(l.scopes=E.join(","))}i.tenantId&&(l.tid=i.tenantId);const _=l;for(const E of Object.keys(_))_[E]===void 0&&delete _[E];const p=await i._getAppCheckToken(),v=p?`#${z_}=${encodeURIComponent(p)}`:"";return`${U_(i)}?${Fi(_).slice(1)}${v}`}function U_({config:i}){return i.emulator?Ns(i,B_):`https://${i.authDomain}/${D_}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="webStorageSupport";class F_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hu,this._completeRedirectFn=l_,this._overrideRedirectResult=a_}async _openPopup(e,n,s,a){var u;Jt((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await Ja(e,n,s,ls(),a);return M_(e,l,Fs())}async _openRedirect(e,n,s,a){await this._originValidation(e);const u=await Ja(e,n,s,ls(),a);return jp(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:u}=this.eventManagers[n];return a?Promise.resolve(a):(Jt(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await C_(e),s=new d_(e);return n.register("authEvent",a=>(A(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yr,{type:Yr},a=>{var u;const l=(u=a==null?void 0:a[0])===null||u===void 0?void 0:u[Yr];l!==void 0&&n(!!l),Xt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g_(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qh()||zs()||qn()}}const Z_=F_;var Ya="@firebase/auth",Qa="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){A(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function V_(i){Ge(new Le("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:l,authDomain:_}=s.options;A(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:l,authDomain:_,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tu(i)},v=new Ep(s,a,u,p);return bp(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ge(new Le("auth-internal",e=>{const n=Us(e.getProvider("auth").getImmediate());return(s=>new H_(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),le(Ya,Qa,j_(i)),le(Ya,Qa,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=5*60,W_=Mh("authIdTokenMaxAge")||$_;let th=null;const G_=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>W_)return;const a=n==null?void 0:n.token;th!==a&&(th=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function q_(i=Bh()){const e=ks(i,"auth");if(e.isInitialized())return e.getImmediate();const n=Lp(i,{popupRedirectResolver:Z_,persistence:[Yp,Fp,hu]}),s=Mh("authTokenSyncURL");if(s){const u=G_(s);Dp(n,u,()=>u(n.currentUser)),Np(n,l=>u(l))}const a=Oh("auth");return a&&Cp(n,`http://${a}`),n}V_("Browser");var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},w,Hs=Hs||{},b=K_||self;function Jn(i){var e=typeof i;return e=e!="object"?e:i?Array.isArray(i)?"array":e:"null",e=="array"||e=="object"&&typeof i.length=="number"}function Vi(i){var e=typeof i;return e=="object"&&i!=null||e=="function"}function X_(i){return Object.prototype.hasOwnProperty.call(i,Qr)&&i[Qr]||(i[Qr]=++J_)}var Qr="closure_uid_"+(1e9*Math.random()>>>0),J_=0;function Y_(i,e,n){return i.call.apply(i.bind,arguments)}function Q_(i,e,n){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function lt(i,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?lt=Y_:lt=Q_,lt.apply(null,arguments)}function In(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function nt(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(s,a,u){for(var l=Array(arguments.length-2),_=2;_<arguments.length;_++)l[_-2]=arguments[_];return e.prototype[a].apply(s,l)}}function ce(){this.s=this.s,this.o=this.o}var tm=0;ce.prototype.s=!1;ce.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),tm!=0)&&X_(this)};ce.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _u=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if(typeof i=="string")return typeof e!="string"||e.length!=1?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function js(i){const e=i.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=i[s];return n}return[]}function eh(i,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(Jn(s)){const a=i.length||0,u=s.length||0;i.length=a+u;for(let l=0;l<u;l++)i[a+l]=s[l]}else i.push(s)}}function ct(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var em=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};b.addEventListener("test",n,e),b.removeEventListener("test",n,e)}catch{}return i}();function Ai(i){return/^[\s\xa0]*$/.test(i)}function Yn(){var i=b.navigator;return i&&(i=i.userAgent)?i:""}function Nt(i){return Yn().indexOf(i)!=-1}function Vs(i){return Vs[" "](i),i}Vs[" "]=function(){};function im(i,e){var n=Km;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}var nm=Nt("Opera"),xi=Nt("Trident")||Nt("MSIE"),mu=Nt("Edge"),ds=mu||xi,gu=Nt("Gecko")&&!(Yn().toLowerCase().indexOf("webkit")!=-1&&!Nt("Edge"))&&!(Nt("Trident")||Nt("MSIE"))&&!Nt("Edge"),rm=Yn().toLowerCase().indexOf("webkit")!=-1&&!Nt("Edge");function vu(){var i=b.document;return i?i.documentMode:void 0}t:{var ih="",ts=function(){var i=Yn();if(gu)return/rv:([^\);]+)(\)|;)/.exec(i);if(mu)return/Edge\/([\d\.]+)/.exec(i);if(xi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(rm)return/WebKit\/(\S+)/.exec(i);if(nm)return/(?:Version)[ \/]?(\S+)/.exec(i)}();if(ts&&(ih=ts?ts[1]:""),xi){var nh=vu();if(nh!=null&&nh>parseFloat(ih))break t}}b.document&&xi&&vu();function ki(i,e){if(ct.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(gu){t:{try{Vs(e.nodeName);var a=!0;break t}catch{}a=!1}a||(e=null)}}else n=="mouseover"?e=i.fromElement:n=="mouseout"&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:sm[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ki.$.h.call(this)}}nt(ki,ct);var sm={2:"touch",3:"pen",4:"mouse"};ki.prototype.h=function(){ki.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var $i="closure_listenable_"+(1e6*Math.random()|0),om=0;function am(i,e,n,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=a,this.key=++om,this.fa=this.ia=!1}function Qn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function $s(i,e,n){for(const s in i)e.call(n,i[s],s,i)}function hm(i,e){for(const n in i)e.call(void 0,i[n],n,i)}function yu(i){const e={};for(const n in i)e[n]=i[n];return e}const rh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wu(i,e){let n,s;for(let a=1;a<arguments.length;a++){s=arguments[a];for(n in s)i[n]=s[n];for(let u=0;u<rh.length;u++)n=rh[u],Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])}}function tr(i){this.src=i,this.g={},this.h=0}tr.prototype.add=function(i,e,n,s,a){var u=i.toString();i=this.g[u],i||(i=this.g[u]=[],this.h++);var l=ps(i,e,s,a);return-1<l?(e=i[l],n||(e.ia=!1)):(e=new am(e,this.src,u,!!s,a),e.ia=n,i.push(e)),e};function fs(i,e){var n=e.type;if(n in i.g){var s=i.g[n],a=_u(s,e),u;(u=0<=a)&&Array.prototype.splice.call(s,a,1),u&&(Qn(e),i.g[n].length==0&&(delete i.g[n],i.h--))}}function ps(i,e,n,s){for(var a=0;a<i.length;++a){var u=i[a];if(!u.fa&&u.listener==e&&u.capture==!!n&&u.la==s)return a}return-1}var Ws="closure_lm_"+(1e6*Math.random()|0),es={};function Tu(i,e,n,s,a){if(s&&s.once)return Pu(i,e,n,s,a);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Tu(i,e[u],n,s,a);return null}return n=Ks(n),i&&i[$i]?i.O(e,n,Vi(s)?!!s.capture:!!s,a):Eu(i,e,n,!1,s,a)}function Eu(i,e,n,s,a,u){if(!e)throw Error("Invalid event type");var l=Vi(a)?!!a.capture:!!a,_=qs(i);if(_||(i[Ws]=_=new tr(i)),n=_.add(e,n,s,l,u),n.proxy)return n;if(s=um(),n.proxy=s,s.src=i,s.listener=n,i.addEventListener)em||(a=l),a===void 0&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(Su(e.toString()),s);else if(i.addListener&&i.removeListener)i.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function um(){function i(n){return e.call(i.src,i.listener,n)}const e=lm;return i}function Pu(i,e,n,s,a){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Pu(i,e[u],n,s,a);return null}return n=Ks(n),i&&i[$i]?i.P(e,n,Vi(s)?!!s.capture:!!s,a):Eu(i,e,n,!0,s,a)}function Iu(i,e,n,s,a){if(Array.isArray(e))for(var u=0;u<e.length;u++)Iu(i,e[u],n,s,a);else s=Vi(s)?!!s.capture:!!s,n=Ks(n),i&&i[$i]?(i=i.i,e=String(e).toString(),e in i.g&&(u=i.g[e],n=ps(u,n,s,a),-1<n&&(Qn(u[n]),Array.prototype.splice.call(u,n,1),u.length==0&&(delete i.g[e],i.h--)))):i&&(i=qs(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ps(e,n,s,a)),(n=-1<i?e[i]:null)&&Gs(n))}function Gs(i){if(typeof i!="number"&&i&&!i.fa){var e=i.src;if(e&&e[$i])fs(e.i,i);else{var n=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(n,s,i.capture):e.detachEvent?e.detachEvent(Su(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=qs(e))?(fs(n,i),n.h==0&&(n.src=null,e[Ws]=null)):Qn(i)}}}function Su(i){return i in es?es[i]:es[i]="on"+i}function lm(i,e){if(i.fa)i=!0;else{e=new ki(e,this);var n=i.listener,s=i.la||i.src;i.ia&&Gs(i),i=n.call(s,e)}return i}function qs(i){return i=i[Ws],i instanceof tr?i:null}var is="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ks(i){return typeof i=="function"?i:(i[is]||(i[is]=function(e){return i.handleEvent(e)}),i[is])}function it(){ce.call(this),this.i=new tr(this),this.S=this,this.J=null}nt(it,ce);it.prototype[$i]=!0;it.prototype.removeEventListener=function(i,e,n,s){Iu(this,i,e,n,s)};function ot(i,e){var n,s=i.J;if(s)for(n=[];s;s=s.J)n.push(s);if(i=i.S,s=e.type||e,typeof e=="string")e=new ct(e,i);else if(e instanceof ct)e.target=e.target||i;else{var a=e;e=new ct(s,i),wu(e,a)}if(a=!0,n)for(var u=n.length-1;0<=u;u--){var l=e.g=n[u];a=Sn(l,s,!0,e)&&a}if(l=e.g=i,a=Sn(l,s,!0,e)&&a,a=Sn(l,s,!1,e)&&a,n)for(u=0;u<n.length;u++)l=e.g=n[u],a=Sn(l,s,!1,e)&&a}it.prototype.N=function(){if(it.$.N.call(this),this.i){var i=this.i,e;for(e in i.g){for(var n=i.g[e],s=0;s<n.length;s++)Qn(n[s]);delete i.g[e],i.h--}}this.J=null};it.prototype.O=function(i,e,n,s){return this.i.add(String(i),e,!1,n,s)};it.prototype.P=function(i,e,n,s){return this.i.add(String(i),e,!0,n,s)};function Sn(i,e,n,s){if(e=i.i.g[String(e)],!e)return!0;e=e.concat();for(var a=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==n){var _=l.listener,p=l.la||l.src;l.ia&&fs(i.i,l),a=_.call(p,s)!==!1&&a}}return a&&!s.defaultPrevented}var Xs=b.JSON.stringify;class cm{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function dm(){var i=Js;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}class fm{constructor(){this.h=this.g=null}add(e,n){const s=Lu.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Lu=new cm(()=>new pm,i=>i.reset());class pm{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function _m(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function mm(i){b.setTimeout(()=>{throw i},0)}let Oi,Ri=!1,Js=new fm,bu=()=>{const i=b.Promise.resolve(void 0);Oi=()=>{i.then(gm)}};var gm=()=>{for(var i;i=dm();){try{i.h.call(i.g)}catch(n){mm(n)}var e=Lu;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ri=!1};function er(i,e){it.call(this),this.h=i||1,this.g=e||b,this.j=lt(this.qb,this),this.l=Date.now()}nt(er,it);w=er.prototype;w.ga=!1;w.T=null;w.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ot(this,"tick"),this.ga&&(Ys(this),this.start()))}};w.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ys(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}w.N=function(){er.$.N.call(this),Ys(this),delete this.g};function Qs(i,e,n){if(typeof i=="function")n&&(i=lt(i,n));else if(i&&typeof i.handleEvent=="function")i=lt(i.handleEvent,i);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:b.setTimeout(i,e||0)}function Cu(i){i.g=Qs(()=>{i.g=null,i.i&&(i.i=!1,Cu(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}class vm extends ce{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cu(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(i){ce.call(this),this.h=i,this.g={}}nt(Mi,ce);var sh=[];function Au(i,e,n,s){Array.isArray(n)||(n&&(sh[0]=n.toString()),n=sh);for(var a=0;a<n.length;a++){var u=Tu(e,n[a],s||i.handleEvent,!1,i.h||i);if(!u)break;i.g[u.key]=u}}function xu(i){$s(i.g,function(e,n){this.g.hasOwnProperty(n)&&Gs(e)},i),i.g={}}Mi.prototype.N=function(){Mi.$.N.call(this),xu(this)};Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ir(){this.g=!0}ir.prototype.Ea=function(){this.g=!1};function ym(i,e,n,s,a,u){i.info(function(){if(i.g)if(u)for(var l="",_=u.split("&"),p=0;p<_.length;p++){var v=_[p].split("=");if(1<v.length){var E=v[0];v=v[1];var I=E.split("_");l=2<=I.length&&I[1]=="type"?l+(E+"="+v+"&"):l+(E+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+`
`+n+`
`+l})}function wm(i,e,n,s,a,u,l){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+`
`+n+`
`+u+" "+l})}function He(i,e,n,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+Em(i,n)+(s?" "+s:"")})}function Tm(i,e){i.info(function(){return"TIMEOUT: "+e})}ir.prototype.info=function(){};function Em(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var s=n[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var u=a[0];if(u!="noop"&&u!="stop"&&u!="close")for(var l=1;l<a.length;l++)a[l]=""}}}}return Xs(n)}catch{return e}}var ti={},oh=null;function to(){return oh=oh||new it}ti.Ta="serverreachability";function ku(i){ct.call(this,ti.Ta,i)}nt(ku,ct);function Ni(i){const e=to();ot(e,new ku(e))}ti.STAT_EVENT="statevent";function Ou(i,e){ct.call(this,ti.STAT_EVENT,i),this.stat=e}nt(Ou,ct);function _t(i){const e=to();ot(e,new Ou(e,i))}ti.Ua="timingevent";function Ru(i,e){ct.call(this,ti.Ua,i),this.size=e}nt(Ru,ct);function Wi(i,e){if(typeof i!="function")throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){i()},e)}var eo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Pm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function io(){}io.prototype.h=null;function ah(i){return i.h||(i.h=i.i())}function Im(){}var Gi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function no(){ct.call(this,"d")}nt(no,ct);function ro(){ct.call(this,"c")}nt(ro,ct);var _s;function nr(){}nt(nr,io);nr.prototype.g=function(){return new XMLHttpRequest};nr.prototype.i=function(){return{}};_s=new nr;function qi(i,e,n,s){this.l=i,this.j=e,this.m=n,this.W=s||1,this.U=new Mi(this),this.P=Sm,i=ds?125:void 0,this.V=new er(i),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Mu}function Mu(){this.i=null,this.g="",this.h=!1}var Sm=45e3,Nu={},ms={};w=qi.prototype;w.setTimeout=function(i){this.P=i};function gs(i,e,n){i.L=1,i.A=sr(Yt(e)),i.u=n,i.S=!0,Du(i,null)}function Du(i,e){i.G=Date.now(),Ki(i),i.B=Yt(i.A);var n=i.B,s=i.W;Array.isArray(s)||(s=[String(s)]),Vu(n.i,"t",s),i.o=0,n=i.l.J,i.h=new Mu,i.g=cl(i.l,n?e:null,!i.u),0<i.O&&(i.M=new vm(lt(i.Pa,i,i.g),i.O)),Au(i.U,i.g,"readystatechange",i.nb),e=i.I?yu(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),Ni(),ym(i.j,i.v,i.B,i.m,i.W,i.u)}w.nb=function(i){i=i.target;const e=this.M;e&&Dt(i)==3?e.l():this.Pa(i)};w.Pa=function(i){try{if(i==this.g)t:{const E=Dt(this.g);var e=this.g.Ia();const I=this.g.da();if(!(3>E)&&(E!=3||ds||this.g&&(this.h.h||this.g.ja()||ch(this.g)))){this.J||E!=4||e==7||(e==8||0>=I?Ni(3):Ni(2)),rr(this);var n=this.g.da();this.ca=n;e:if(Bu(this)){var s=ch(this.g);i="";var a=s.length,u=Dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ee(this),Si(this);var l="";break e}this.h.i=new b.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:u&&e==a-1});s.length=0,this.h.g+=i,this.o=0,l=this.h.g}else l=this.g.ja();if(this.i=n==200,wm(this.j,this.v,this.B,this.m,this.W,E,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var _,p=this.g;if((_=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ai(_)){var v=_;break e}}v=null}if(n=v)He(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vs(this,n);else{this.i=!1,this.s=3,_t(12),Ee(this),Si(this);break t}}this.S?(zu(this,E,l),ds&&this.i&&E==3&&(Au(this.U,this.V,"tick",this.mb),this.V.start())):(He(this.j,this.m,l,null),vs(this,l)),E==4&&Ee(this),this.i&&!this.J&&(E==4?al(this.l,this):(this.i=!1,Ki(this)))}else Wm(this.g),n==400&&0<l.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Ee(this),Si(this)}}}catch{}finally{}};function Bu(i){return i.g?i.v=="GET"&&i.L!=2&&i.l.Ha:!1}function zu(i,e,n){let s=!0,a;for(;!i.J&&i.o<n.length;)if(a=Lm(i,n),a==ms){e==4&&(i.s=4,_t(14),s=!1),He(i.j,i.m,null,"[Incomplete Response]");break}else if(a==Nu){i.s=4,_t(15),He(i.j,i.m,n,"[Invalid Chunk]"),s=!1;break}else He(i.j,i.m,a,null),vs(i,a);Bu(i)&&i.o!=0&&(i.h.g=i.h.g.slice(i.o),i.o=0),e!=4||n.length!=0||i.h.h||(i.s=1,_t(16),s=!1),i.i=i.i&&s,s?0<n.length&&!i.ba&&(i.ba=!0,e=i.l,e.g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),lo(e),e.M=!0,_t(11))):(He(i.j,i.m,n,"[Invalid Chunked Response]"),Ee(i),Si(i))}w.mb=function(){if(this.g){var i=Dt(this.g),e=this.g.ja();this.o<e.length&&(rr(this),zu(this,i,e),this.i&&i!=4&&Ki(this))}};function Lm(i,e){var n=i.o,s=e.indexOf(`
`,n);return s==-1?ms:(n=Number(e.substring(n,s)),isNaN(n)?Nu:(s+=1,s+n>e.length?ms:(e=e.slice(s,s+n),i.o=s+n,e)))}w.cancel=function(){this.J=!0,Ee(this)};function Ki(i){i.Y=Date.now()+i.P,Uu(i,i.P)}function Uu(i,e){if(i.C!=null)throw Error("WatchDog timer not null");i.C=Wi(lt(i.lb,i),e)}function rr(i){i.C&&(b.clearTimeout(i.C),i.C=null)}w.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(Tm(this.j,this.B),this.L!=2&&(Ni(),_t(17)),Ee(this),this.s=2,Si(this)):Uu(this,this.Y-i)};function Si(i){i.l.H==0||i.J||al(i.l,i)}function Ee(i){rr(i);var e=i.M;e&&typeof e.sa=="function"&&e.sa(),i.M=null,Ys(i.V),xu(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function vs(i,e){try{var n=i.l;if(n.H!=0&&(n.g==i||ys(n.i,i))){if(!i.K&&ys(n.i,i)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var a=s;if(a[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<i.G)Vn(n),ur(n);else break t;uo(n),_t(18)}}else n.Fa=a[1],0<n.Fa-n.V&&37500>a[2]&&n.G&&n.A==0&&!n.v&&(n.v=Wi(lt(n.ib,n),6e3));if(1>=Gu(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Pe(n,11)}else if((i.K||n.g==i)&&Vn(n),!Ai(e))for(a=n.Ja.g.parse(e),e=0;e<a.length;e++){let v=a[e];if(n.V=v[0],v=v[1],n.H==2)if(v[0]=="c"){n.K=v[1],n.pa=v[2];const E=v[3];E!=null&&(n.ra=E,n.l.info("VER="+n.ra));const I=v[4];I!=null&&(n.Ga=I,n.l.info("SVER="+n.Ga));const F=v[5];F!=null&&typeof F=="number"&&0<F&&(s=1.5*F,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const Q=i.g;if(Q){const tt=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tt){var u=s.i;u.g||tt.indexOf("spdy")==-1&&tt.indexOf("quic")==-1&&tt.indexOf("h2")==-1||(u.j=u.l,u.g=new Set,u.h&&(so(u,u.h),u.h=null))}if(s.F){const U=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;U&&(s.Da=U,$(s.I,s.F,U))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var l=i;if(s.wa=ll(s,s.J?s.pa:null,s.Y),l.K){qu(s.i,l);var _=l,p=s.L;p&&_.setTimeout(p),_.C&&(rr(_),Ki(_)),s.g=l}else sl(s);0<n.j.length&&lr(n)}else v[0]!="stop"&&v[0]!="close"||Pe(n,7);else n.H==3&&(v[0]=="stop"||v[0]=="close"?v[0]=="stop"?Pe(n,7):ho(n):v[0]!="noop"&&n.h&&n.h.Aa(v),n.A=0)}}Ni(4)}catch{}}function bm(i){if(i.Z&&typeof i.Z=="function")return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if(typeof i=="string")return i.split("");if(Jn(i)){for(var e=[],n=i.length,s=0;s<n;s++)e.push(i[s]);return e}e=[],n=0;for(s in i)e[n++]=i[s];return e}function Cm(i){if(i.ta&&typeof i.ta=="function")return i.ta();if(!i.Z||typeof i.Z!="function"){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Jn(i)||typeof i=="string"){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const s in i)e[n++]=s;return e}}}function Fu(i,e){if(i.forEach&&typeof i.forEach=="function")i.forEach(e,void 0);else if(Jn(i)||typeof i=="string")Array.prototype.forEach.call(i,e,void 0);else for(var n=Cm(i),s=bm(i),a=s.length,u=0;u<a;u++)e.call(void 0,s[u],n&&n[u],i)}var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Am(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var s=i[n].indexOf("="),a=null;if(0<=s){var u=i[n].substring(0,s);a=i[n].substring(s+1)}else u=i[n];e(u,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}function Se(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Se){this.h=i.h,Hn(this,i.j),this.s=i.s,this.g=i.g,jn(this,i.m),this.l=i.l;var e=i.i,n=new Di;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),hh(this,n),this.o=i.o}else i&&(e=String(i).match(Zu))?(this.h=!1,Hn(this,e[1]||"",!0),this.s=Ei(e[2]||""),this.g=Ei(e[3]||"",!0),jn(this,e[4]),this.l=Ei(e[5]||"",!0),hh(this,e[6]||"",!0),this.o=Ei(e[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}Se.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Pi(e,uh,!0),":");var n=this.g;return(n||e=="file")&&(i.push("//"),(e=this.s)&&i.push(Pi(e,uh,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&i.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&i.push("/"),i.push(Pi(n,n.charAt(0)=="/"?Om:km,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Pi(n,Mm)),i.join("")};function Yt(i){return new Se(i)}function Hn(i,e,n){i.j=n?Ei(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function jn(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function hh(i,e,n){e instanceof Di?(i.i=e,Nm(i.i,i.h)):(n||(e=Pi(e,Rm)),i.i=new Di(e,i.h))}function $(i,e,n){i.i.set(e,n)}function sr(i){return $(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ei(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Pi(i,e,n){return typeof i=="string"?(i=encodeURI(i).replace(e,xm),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function xm(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var uh=/[#\/\?@]/g,km=/[#\?:]/g,Om=/[#\?]/g,Rm=/[#\?@]/g,Mm=/#/g;function Di(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function de(i){i.g||(i.g=new Map,i.h=0,i.i&&Am(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}w=Di.prototype;w.add=function(i,e){de(this),this.i=null,i=ei(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this};function Hu(i,e){de(i),e=ei(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ju(i,e){return de(i),e=ei(i,e),i.g.has(e)}w.forEach=function(i,e){de(this),this.g.forEach(function(n,s){n.forEach(function(a){i.call(e,a,s,this)},this)},this)};w.ta=function(){de(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const a=i[s];for(let u=0;u<a.length;u++)n.push(e[s])}return n};w.Z=function(i){de(this);let e=[];if(typeof i=="string")ju(this,i)&&(e=e.concat(this.g.get(ei(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e};w.set=function(i,e){return de(this),this.i=null,i=ei(this,i),ju(this,i)&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this};w.get=function(i,e){return i?(i=this.Z(i),0<i.length?String(i[0]):e):e};function Vu(i,e,n){Hu(i,e),0<n.length&&(i.i=null,i.g.set(ei(i,e),js(n)),i.h+=n.length)}w.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const u=encodeURIComponent(String(s)),l=this.Z(s);for(s=0;s<l.length;s++){var a=u;l[s]!==""&&(a+="="+encodeURIComponent(String(l[s]))),i.push(a)}}return this.i=i.join("&")};function ei(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Nm(i,e){e&&!i.j&&(de(i),i.i=null,i.g.forEach(function(n,s){var a=s.toLowerCase();s!=a&&(Hu(this,s),Vu(this,a,n))},i)),i.j=e}var Dm=class{constructor(i,e){this.g=i,this.map=e}};function $u(i){this.l=i||Bm,b.PerformanceNavigationTiming?(i=b.performance.getEntriesByType("navigation"),i=0<i.length&&(i[0].nextHopProtocol=="hq"||i[0].nextHopProtocol=="h2")):i=!!(b.g&&b.g.Ka&&b.g.Ka()&&b.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Bm=10;function Wu(i){return i.h?!0:i.g?i.g.size>=i.j:!1}function Gu(i){return i.h?1:i.g?i.g.size:0}function ys(i,e){return i.h?i.h==e:i.g?i.g.has(e):!1}function so(i,e){i.g?i.g.add(e):i.h=e}function qu(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}$u.prototype.cancel=function(){if(this.i=Ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const i of this.g.values())i.cancel();this.g.clear()}};function Ku(i){if(i.h!=null)return i.i.concat(i.h.F);if(i.g!=null&&i.g.size!==0){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return js(i.i)}var zm=class{stringify(i){return b.JSON.stringify(i,void 0)}parse(i){return b.JSON.parse(i,void 0)}};function Um(){this.g=new zm}function Fm(i,e,n){const s=n||"";try{Fu(i,function(a,u){let l=a;Vi(a)&&(l=Xs(a)),e.push(s+u+"="+encodeURIComponent(l))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Zm(i,e){const n=new ir;if(b.Image){const s=new Image;s.onload=In(Ln,n,s,"TestLoadImage: loaded",!0,e),s.onerror=In(Ln,n,s,"TestLoadImage: error",!1,e),s.onabort=In(Ln,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=In(Ln,n,s,"TestLoadImage: timeout",!1,e),b.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}function Ln(i,e,n,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function or(i){this.l=i.ec||null,this.j=i.ob||!1}nt(or,io);or.prototype.g=function(){return new ar(this.l,this.j)};or.prototype.i=function(i){return function(){return i}}({});function ar(i,e){it.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=oo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nt(ar,it);var oo=0;w=ar.prototype;w.open=function(i,e){if(this.readyState!=oo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Bi(this)};w.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||b).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};w.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=oo};w.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xu(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))};function Xu(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}w.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Xi(this):Bi(this),this.readyState==3&&Xu(this)}};w.Za=function(i){this.g&&(this.response=this.responseText=i,Xi(this))};w.Ya=function(i){this.g&&(this.response=i,Xi(this))};w.ka=function(){this.g&&Xi(this)};function Xi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Bi(i)}w.setRequestHeader=function(i,e){this.v.append(i,e)};w.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""};w.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,i.push(n[0]+": "+n[1]),n=e.next();return i.join(`\r
`)};function Bi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(i){this.m=i?"include":"same-origin"}});var Hm=b.JSON.parse;function K(i){it.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ju,this.L=this.M=!1}nt(K,it);var Ju="",jm=/^https?$/i,Vm=["POST","PUT"];w=K.prototype;w.Oa=function(i){this.M=i};w.ha=function(i,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_s.g(),this.C=this.u?ah(this.u):ah(_s),this.g.onreadystatechange=lt(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(u){lh(this,u);return}if(i=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)n.set(a,s[a]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const u of s.keys())n.set(u,s.get(u));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(u=>u.toLowerCase()=="content-type"),a=b.FormData&&i instanceof b.FormData,!(0<=_u(Vm,e))||s||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of n)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tl(this),0<this.B&&((this.L=$m(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.ua,this)):this.A=Qs(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(u){lh(this,u)}};function $m(i){return xi&&typeof i.timeout=="number"&&i.ontimeout!==void 0}w.ua=function(){typeof Hs<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ot(this,"timeout"),this.abort(8))};function lh(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Yu(i),hr(i)}function Yu(i){i.F||(i.F=!0,ot(i,"complete"),ot(i,"error"))}w.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,ot(this,"complete"),ot(this,"abort"),hr(this))};w.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hr(this,!0)),K.$.N.call(this)};w.La=function(){this.s||(this.G||this.v||this.l?Qu(this):this.kb())};w.kb=function(){Qu(this)};function Qu(i){if(i.h&&typeof Hs<"u"&&(!i.C[1]||Dt(i)!=4||i.da()!=2)){if(i.v&&Dt(i)==4)Qs(i.La,0,i);else if(ot(i,"readystatechange"),Dt(i)==4){i.h=!1;try{const l=i.da();t:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=l===0){var a=String(i.I).match(Zu)[1]||null;!a&&b.self&&b.self.location&&(a=b.self.location.protocol.slice(0,-1)),s=!jm.test(a?a.toLowerCase():"")}n=s}if(n)ot(i,"complete"),ot(i,"success");else{i.m=6;try{var u=2<Dt(i)?i.g.statusText:""}catch{u=""}i.j=u+" ["+i.da()+"]",Yu(i)}}finally{hr(i)}}}}function hr(i,e){if(i.g){tl(i);const n=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||ot(i,"ready");try{n.onreadystatechange=s}catch{}}}function tl(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(b.clearTimeout(i.A),i.A=null)}w.isActive=function(){return!!this.g};function Dt(i){return i.g?i.g.readyState:0}w.da=function(){try{return 2<Dt(this)?this.g.status:-1}catch{return-1}};w.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};w.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&e.indexOf(i)==0&&(e=e.substring(i.length)),Hm(e)}};function ch(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Ju:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Wm(i){const e={};i=(i.g&&2<=Dt(i)&&i.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<i.length;s++){if(Ai(i[s]))continue;var n=_m(i[s]);const a=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const u=e[a]||[];e[a]=u,u.push(n)}hm(e,function(s){return s.join(", ")})}w.Ia=function(){return this.m};w.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function el(i){let e="";return $s(i,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function ao(i,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=el(n),typeof i=="string"?n!=null&&encodeURIComponent(String(n)):$(i,e,n))}function wi(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function il(i){this.Ga=0,this.j=[],this.l=new ir,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wi("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wi("baseRetryDelayMs",5e3,i),this.hb=wi("retryDelaySeedMs",1e4,i),this.eb=wi("forwardChannelMaxRetries",2,i),this.xa=wi("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new $u(i&&i.concurrentRequestLimit),this.Ja=new Um,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}w=il.prototype;w.ra=8;w.H=1;function ho(i){if(nl(i),i.H==3){var e=i.W++,n=Yt(i.I);if($(n,"SID",i.K),$(n,"RID",e),$(n,"TYPE","terminate"),Ji(i,n),e=new qi(i,i.l,e),e.L=2,e.A=sr(Yt(n)),n=!1,b.navigator&&b.navigator.sendBeacon)try{n=b.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&b.Image&&(new Image().src=e.A,n=!0),n||(e.g=cl(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ki(e)}ul(i)}function ur(i){i.g&&(lo(i),i.g.cancel(),i.g=null)}function nl(i){ur(i),i.u&&(b.clearTimeout(i.u),i.u=null),Vn(i),i.i.cancel(),i.m&&(typeof i.m=="number"&&b.clearTimeout(i.m),i.m=null)}function lr(i){if(!Wu(i.i)&&!i.m){i.m=!0;var e=i.Na;Oi||bu(),Ri||(Oi(),Ri=!0),Js.add(e,i),i.C=0}}function Gm(i,e){return Gu(i.i)>=i.i.j-(i.m?1:0)?!1:i.m?(i.j=e.F.concat(i.j),!0):i.H==1||i.H==2||i.C>=(i.cb?0:i.eb)?!1:(i.m=Wi(lt(i.Na,i,e),hl(i,i.C)),i.C++,!0)}w.Na=function(i){if(this.m)if(this.m=null,this.H==1){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new qi(this,this.l,i);let u=this.s;if(this.U&&(u?(u=yu(u),wu(u,this.U)):u=this.U),this.o!==null||this.O||(a.I=u,u=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){e:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break t}if(e===4096||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=rl(this,a,e),n=Yt(this.I),$(n,"RID",i),$(n,"CVER",22),this.F&&$(n,"X-HTTP-Session-Id",this.F),Ji(this,n),u&&(this.O?e="headers="+encodeURIComponent(String(el(u)))+"&"+e:this.o&&ao(n,this.o,u)),so(this.i,a),this.bb&&$(n,"TYPE","init"),this.P?($(n,"$req",e),$(n,"SID","null"),a.aa=!0,gs(a,n,null)):gs(a,n,e),this.H=2}}else this.H==3&&(i?dh(this,i):this.j.length==0||Wu(this.i)||dh(this))};function dh(i,e){var n;e?n=e.m:n=i.W++;const s=Yt(i.I);$(s,"SID",i.K),$(s,"RID",n),$(s,"AID",i.V),Ji(i,s),i.o&&i.s&&ao(s,i.o,i.s),n=new qi(i,i.l,n,i.C+1),i.o===null&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=rl(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),so(i.i,n),gs(n,s,e)}function Ji(i,e){i.na&&$s(i.na,function(n,s){$(e,s,n)}),i.h&&Fu({},function(n,s){$(e,s,n)})}function rl(i,e,n){n=Math.min(i.j.length,n);var s=i.h?lt(i.h.Va,i.h,i):null;t:{var a=i.j;let u=-1;for(;;){const l=["count="+n];u==-1?0<n?(u=a[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let _=!0;for(let p=0;p<n;p++){let v=a[p].g;const E=a[p].map;if(v-=u,0>v)u=Math.max(0,a[p].g-100),_=!1;else try{Fm(E,l,"req"+v+"_")}catch{s&&s(E)}}if(_){s=l.join("&");break t}}}return i=i.j.splice(0,n),e.F=i,s}function sl(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Oi||bu(),Ri||(Oi(),Ri=!0),Js.add(e,i),i.A=0}}function uo(i){return i.g||i.u||3<=i.A?!1:(i.ba++,i.u=Wi(lt(i.Ma,i),hl(i,i.A)),i.A++,!0)}w.Ma=function(){if(this.u=null,ol(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Wi(lt(this.jb,this),i)}};w.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,_t(10),ur(this),ol(this))};function lo(i){i.B!=null&&(b.clearTimeout(i.B),i.B=null)}function ol(i){i.g=new qi(i,i.l,"rpc",i.ba),i.o===null&&(i.g.I=i.s),i.g.O=0;var e=Yt(i.wa);$(e,"RID","rpc"),$(e,"SID",i.K),$(e,"AID",i.V),$(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&$(e,"TO",i.qa),$(e,"TYPE","xmlhttp"),Ji(i,e),i.o&&i.s&&ao(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=sr(Yt(e)),n.u=null,n.S=!0,Du(n,i)}w.ib=function(){this.v!=null&&(this.v=null,ur(this),uo(this),_t(19))};function Vn(i){i.v!=null&&(b.clearTimeout(i.v),i.v=null)}function al(i,e){var n=null;if(i.g==e){Vn(i),lo(i),i.g=null;var s=2}else if(ys(i.i,e))n=e.F,qu(i.i,e),s=1;else return;if(i.H!=0){if(e.i)if(s==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var a=i.C;s=to(),ot(s,new Ru(s,n)),lr(i)}else sl(i);else if(a=e.s,a==3||a==0&&0<e.ca||!(s==1&&Gm(i,e)||s==2&&uo(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),a){case 1:Pe(i,5);break;case 4:Pe(i,10);break;case 3:Pe(i,6);break;default:Pe(i,2)}}}function hl(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Pe(i,e){if(i.l.info("Error code "+e),e==2){var n=null;i.h&&(n=null);var s=lt(i.pb,i);n||(n=new Se("//www.google.com/images/cleardot.gif"),b.location&&b.location.protocol=="http"||Hn(n,"https"),sr(n)),Zm(n.toString(),s)}else _t(2);i.H=0,i.h&&i.h.za(e),ul(i),nl(i)}w.pb=function(i){i?(this.l.info("Successfully pinged google.com"),_t(2)):(this.l.info("Failed to ping google.com"),_t(1))};function ul(i){if(i.H=0,i.ma=[],i.h){const e=Ku(i.i);(e.length!=0||i.j.length!=0)&&(eh(i.ma,e),eh(i.ma,i.j),i.i.i.length=0,js(i.j),i.j.length=0),i.h.ya()}}function ll(i,e,n){var s=n instanceof Se?Yt(n):new Se(n);if(s.g!="")e&&(s.g=e+"."+s.g),jn(s,s.m);else{var a=b.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var u=new Se(null);s&&Hn(u,s),e&&(u.g=e),a&&jn(u,a),n&&(u.l=n),s=u}return n=i.F,e=i.Da,n&&e&&$(s,n,e),$(s,"VER",i.ra),Ji(i,s),s}function cl(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=i.Ha&&!i.va?new K(new or({ob:n})):new K(i.va),e.Oa(i.J),e}w.isActive=function(){return!!this.h&&this.h.isActive(this)};function dl(){}w=dl.prototype;w.Ba=function(){};w.Aa=function(){};w.za=function(){};w.ya=function(){};w.isActive=function(){return!0};w.Va=function(){};function Ct(i,e){it.call(this),this.g=new il(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Ai(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ai(e)&&(this.g.F=e,i=this.h,i!==null&&e in i&&(i=this.h,e in i&&delete i[e])),this.j=new ii(this)}nt(Ct,it);Ct.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;_t(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=ll(i,null,i.Y),lr(i)};Ct.prototype.close=function(){ho(this.g)};Ct.prototype.u=function(i){var e=this.g;if(typeof i=="string"){var n={};n.__data__=i,i=n}else this.v&&(n={},n.__data__=Xs(i),i=n);e.j.push(new Dm(e.fb++,i)),e.H==3&&lr(e)};Ct.prototype.N=function(){this.g.h=null,delete this.j,ho(this.g),delete this.g,Ct.$.N.call(this)};function fl(i){no.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){t:{for(const n in e){i=n;break t}i=void 0}(this.i=i)&&(i=this.i,e=e!==null&&i in e?e[i]:void 0),this.data=e}else this.data=i}nt(fl,no);function pl(){ro.call(this),this.status=1}nt(pl,ro);function ii(i){this.g=i}nt(ii,dl);ii.prototype.Ba=function(){ot(this.g,"a")};ii.prototype.Aa=function(i){ot(this.g,new fl(i))};ii.prototype.za=function(i){ot(this.g,new pl)};ii.prototype.ya=function(){ot(this.g,"b")};function qm(){this.blockSize=-1}function Ft(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}nt(Ft,qm);Ft.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ns(i,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var a=0;16>a;++a)s[a]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(a=0;16>a;++a)s[a]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=i.g[0],n=i.g[1],a=i.g[2];var u=i.g[3],l=e+(u^n&(a^u))+s[0]+3614090360&4294967295;e=n+(l<<7&4294967295|l>>>25),l=u+(a^e&(n^a))+s[1]+3905402710&4294967295,u=e+(l<<12&4294967295|l>>>20),l=a+(n^u&(e^n))+s[2]+606105819&4294967295,a=u+(l<<17&4294967295|l>>>15),l=n+(e^a&(u^e))+s[3]+3250441966&4294967295,n=a+(l<<22&4294967295|l>>>10),l=e+(u^n&(a^u))+s[4]+4118548399&4294967295,e=n+(l<<7&4294967295|l>>>25),l=u+(a^e&(n^a))+s[5]+1200080426&4294967295,u=e+(l<<12&4294967295|l>>>20),l=a+(n^u&(e^n))+s[6]+2821735955&4294967295,a=u+(l<<17&4294967295|l>>>15),l=n+(e^a&(u^e))+s[7]+4249261313&4294967295,n=a+(l<<22&4294967295|l>>>10),l=e+(u^n&(a^u))+s[8]+1770035416&4294967295,e=n+(l<<7&4294967295|l>>>25),l=u+(a^e&(n^a))+s[9]+2336552879&4294967295,u=e+(l<<12&4294967295|l>>>20),l=a+(n^u&(e^n))+s[10]+4294925233&4294967295,a=u+(l<<17&4294967295|l>>>15),l=n+(e^a&(u^e))+s[11]+2304563134&4294967295,n=a+(l<<22&4294967295|l>>>10),l=e+(u^n&(a^u))+s[12]+1804603682&4294967295,e=n+(l<<7&4294967295|l>>>25),l=u+(a^e&(n^a))+s[13]+4254626195&4294967295,u=e+(l<<12&4294967295|l>>>20),l=a+(n^u&(e^n))+s[14]+2792965006&4294967295,a=u+(l<<17&4294967295|l>>>15),l=n+(e^a&(u^e))+s[15]+1236535329&4294967295,n=a+(l<<22&4294967295|l>>>10),l=e+(a^u&(n^a))+s[1]+4129170786&4294967295,e=n+(l<<5&4294967295|l>>>27),l=u+(n^a&(e^n))+s[6]+3225465664&4294967295,u=e+(l<<9&4294967295|l>>>23),l=a+(e^n&(u^e))+s[11]+643717713&4294967295,a=u+(l<<14&4294967295|l>>>18),l=n+(u^e&(a^u))+s[0]+3921069994&4294967295,n=a+(l<<20&4294967295|l>>>12),l=e+(a^u&(n^a))+s[5]+3593408605&4294967295,e=n+(l<<5&4294967295|l>>>27),l=u+(n^a&(e^n))+s[10]+38016083&4294967295,u=e+(l<<9&4294967295|l>>>23),l=a+(e^n&(u^e))+s[15]+3634488961&4294967295,a=u+(l<<14&4294967295|l>>>18),l=n+(u^e&(a^u))+s[4]+3889429448&4294967295,n=a+(l<<20&4294967295|l>>>12),l=e+(a^u&(n^a))+s[9]+568446438&4294967295,e=n+(l<<5&4294967295|l>>>27),l=u+(n^a&(e^n))+s[14]+3275163606&4294967295,u=e+(l<<9&4294967295|l>>>23),l=a+(e^n&(u^e))+s[3]+4107603335&4294967295,a=u+(l<<14&4294967295|l>>>18),l=n+(u^e&(a^u))+s[8]+1163531501&4294967295,n=a+(l<<20&4294967295|l>>>12),l=e+(a^u&(n^a))+s[13]+2850285829&4294967295,e=n+(l<<5&4294967295|l>>>27),l=u+(n^a&(e^n))+s[2]+4243563512&4294967295,u=e+(l<<9&4294967295|l>>>23),l=a+(e^n&(u^e))+s[7]+1735328473&4294967295,a=u+(l<<14&4294967295|l>>>18),l=n+(u^e&(a^u))+s[12]+2368359562&4294967295,n=a+(l<<20&4294967295|l>>>12),l=e+(n^a^u)+s[5]+4294588738&4294967295,e=n+(l<<4&4294967295|l>>>28),l=u+(e^n^a)+s[8]+2272392833&4294967295,u=e+(l<<11&4294967295|l>>>21),l=a+(u^e^n)+s[11]+1839030562&4294967295,a=u+(l<<16&4294967295|l>>>16),l=n+(a^u^e)+s[14]+4259657740&4294967295,n=a+(l<<23&4294967295|l>>>9),l=e+(n^a^u)+s[1]+2763975236&4294967295,e=n+(l<<4&4294967295|l>>>28),l=u+(e^n^a)+s[4]+1272893353&4294967295,u=e+(l<<11&4294967295|l>>>21),l=a+(u^e^n)+s[7]+4139469664&4294967295,a=u+(l<<16&4294967295|l>>>16),l=n+(a^u^e)+s[10]+3200236656&4294967295,n=a+(l<<23&4294967295|l>>>9),l=e+(n^a^u)+s[13]+681279174&4294967295,e=n+(l<<4&4294967295|l>>>28),l=u+(e^n^a)+s[0]+3936430074&4294967295,u=e+(l<<11&4294967295|l>>>21),l=a+(u^e^n)+s[3]+3572445317&4294967295,a=u+(l<<16&4294967295|l>>>16),l=n+(a^u^e)+s[6]+76029189&4294967295,n=a+(l<<23&4294967295|l>>>9),l=e+(n^a^u)+s[9]+3654602809&4294967295,e=n+(l<<4&4294967295|l>>>28),l=u+(e^n^a)+s[12]+3873151461&4294967295,u=e+(l<<11&4294967295|l>>>21),l=a+(u^e^n)+s[15]+530742520&4294967295,a=u+(l<<16&4294967295|l>>>16),l=n+(a^u^e)+s[2]+3299628645&4294967295,n=a+(l<<23&4294967295|l>>>9),l=e+(a^(n|~u))+s[0]+4096336452&4294967295,e=n+(l<<6&4294967295|l>>>26),l=u+(n^(e|~a))+s[7]+1126891415&4294967295,u=e+(l<<10&4294967295|l>>>22),l=a+(e^(u|~n))+s[14]+2878612391&4294967295,a=u+(l<<15&4294967295|l>>>17),l=n+(u^(a|~e))+s[5]+4237533241&4294967295,n=a+(l<<21&4294967295|l>>>11),l=e+(a^(n|~u))+s[12]+1700485571&4294967295,e=n+(l<<6&4294967295|l>>>26),l=u+(n^(e|~a))+s[3]+2399980690&4294967295,u=e+(l<<10&4294967295|l>>>22),l=a+(e^(u|~n))+s[10]+4293915773&4294967295,a=u+(l<<15&4294967295|l>>>17),l=n+(u^(a|~e))+s[1]+2240044497&4294967295,n=a+(l<<21&4294967295|l>>>11),l=e+(a^(n|~u))+s[8]+1873313359&4294967295,e=n+(l<<6&4294967295|l>>>26),l=u+(n^(e|~a))+s[15]+4264355552&4294967295,u=e+(l<<10&4294967295|l>>>22),l=a+(e^(u|~n))+s[6]+2734768916&4294967295,a=u+(l<<15&4294967295|l>>>17),l=n+(u^(a|~e))+s[13]+1309151649&4294967295,n=a+(l<<21&4294967295|l>>>11),l=e+(a^(n|~u))+s[4]+4149444226&4294967295,e=n+(l<<6&4294967295|l>>>26),l=u+(n^(e|~a))+s[11]+3174756917&4294967295,u=e+(l<<10&4294967295|l>>>22),l=a+(e^(u|~n))+s[2]+718787259&4294967295,a=u+(l<<15&4294967295|l>>>17),l=n+(u^(a|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(l<<21&4294967295|l>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+u&4294967295}Ft.prototype.j=function(i,e){e===void 0&&(e=i.length);for(var n=e-this.blockSize,s=this.m,a=this.h,u=0;u<e;){if(a==0)for(;u<=n;)ns(this,i,u),u+=this.blockSize;if(typeof i=="string"){for(;u<e;)if(s[a++]=i.charCodeAt(u++),a==this.blockSize){ns(this,s),a=0;break}}else for(;u<e;)if(s[a++]=i[u++],a==this.blockSize){ns(this,s),a=0;break}}this.h=a,this.i+=e};Ft.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=n&255,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)i[n++]=this.g[e]>>>s&255;return i};function H(i,e){this.h=e;for(var n=[],s=!0,a=i.length-1;0<=a;a--){var u=i[a]|0;s&&u==e||(n[a]=u,s=!1)}this.g=n}var Km={};function co(i){return-128<=i&&128>i?im(i,function(e){return new H([e|0],0>e?-1:0)}):new H([i|0],0>i?-1:0)}function Bt(i){if(isNaN(i)||!isFinite(i))return $e;if(0>i)return st(Bt(-i));for(var e=[],n=1,s=0;i>=n;s++)e[s]=i/n|0,n*=ws;return new H(e,0)}function _l(i,e){if(i.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(i.charAt(0)=="-")return st(_l(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Bt(Math.pow(e,8)),s=$e,a=0;a<i.length;a+=8){var u=Math.min(8,i.length-a),l=parseInt(i.substring(a,a+u),e);8>u?(u=Bt(Math.pow(e,u)),s=s.R(u).add(Bt(l))):(s=s.R(n),s=s.add(Bt(l)))}return s}var ws=4294967296,$e=co(0),Ts=co(1),fh=co(16777216);w=H.prototype;w.ea=function(){if(bt(this))return-st(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);i+=(0<=s?s:ws+s)*e,e*=ws}return i};w.toString=function(i){if(i=i||10,2>i||36<i)throw Error("radix out of range: "+i);if(Kt(this))return"0";if(bt(this))return"-"+st(this).toString(i);for(var e=Bt(Math.pow(i,6)),n=this,s="";;){var a=Wn(n,e).g;n=$n(n,a.R(e));var u=((0<n.g.length?n.g[0]:n.h)>>>0).toString(i);if(n=a,Kt(n))return u+s;for(;6>u.length;)u="0"+u;s=u+s}};w.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h};function Kt(i){if(i.h!=0)return!1;for(var e=0;e<i.g.length;e++)if(i.g[e]!=0)return!1;return!0}function bt(i){return i.h==-1}w.X=function(i){return i=$n(this,i),bt(i)?-1:Kt(i)?0:1};function st(i){for(var e=i.g.length,n=[],s=0;s<e;s++)n[s]=~i.g[s];return new H(n,~i.h).add(Ts)}w.abs=function(){return bt(this)?st(this):this};w.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0,a=0;a<=e;a++){var u=s+(this.D(a)&65535)+(i.D(a)&65535),l=(u>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);s=l>>>16,u&=65535,l&=65535,n[a]=l<<16|u}return new H(n,n[n.length-1]&-2147483648?-1:0)};function $n(i,e){return i.add(st(e))}w.R=function(i){if(Kt(this)||Kt(i))return $e;if(bt(this))return bt(i)?st(this).R(st(i)):st(st(this).R(i));if(bt(i))return st(this.R(st(i)));if(0>this.X(fh)&&0>i.X(fh))return Bt(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<i.g.length;a++){var u=this.D(s)>>>16,l=this.D(s)&65535,_=i.D(a)>>>16,p=i.D(a)&65535;n[2*s+2*a]+=l*p,bn(n,2*s+2*a),n[2*s+2*a+1]+=u*p,bn(n,2*s+2*a+1),n[2*s+2*a+1]+=l*_,bn(n,2*s+2*a+1),n[2*s+2*a+2]+=u*_,bn(n,2*s+2*a+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new H(n,0)};function bn(i,e){for(;(i[e]&65535)!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Ti(i,e){this.g=i,this.h=e}function Wn(i,e){if(Kt(e))throw Error("division by zero");if(Kt(i))return new Ti($e,$e);if(bt(i))return e=Wn(st(i),e),new Ti(st(e.g),st(e.h));if(bt(e))return e=Wn(i,st(e)),new Ti(st(e.g),e.h);if(30<i.g.length){if(bt(i)||bt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ts,s=e;0>=s.X(i);)n=ph(n),s=ph(s);var a=Fe(n,1),u=Fe(s,1);for(s=Fe(s,2),n=Fe(n,2);!Kt(s);){var l=u.add(s);0>=l.X(i)&&(a=a.add(n),u=l),s=Fe(s,1),n=Fe(n,1)}return e=$n(i,a.R(e)),new Ti(a,e)}for(a=$e;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),u=Bt(n),l=u.R(e);bt(l)||0<l.X(i);)n-=s,u=Bt(n),l=u.R(e);Kt(u)&&(u=Ts),a=a.add(u),i=$n(i,l)}return new Ti(a,i)}w.gb=function(i){return Wn(this,i).h};w.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&i.D(s);return new H(n,this.h&i.h)};w.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|i.D(s);return new H(n,this.h|i.h)};w.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^i.D(s);return new H(n,this.h^i.h)};function ph(i){for(var e=i.g.length+1,n=[],s=0;s<e;s++)n[s]=i.D(s)<<1|i.D(s-1)>>>31;return new H(n,i.h)}function Fe(i,e){var n=e>>5;e%=32;for(var s=i.g.length-n,a=[],u=0;u<s;u++)a[u]=0<e?i.D(u+n)>>>e|i.D(u+n+1)<<32-e:i.D(u+n);return new H(a,i.h)}Ct.prototype.send=Ct.prototype.u;Ct.prototype.open=Ct.prototype.m;Ct.prototype.close=Ct.prototype.close;eo.NO_ERROR=0;eo.TIMEOUT=8;eo.HTTP_ERROR=6;Pm.COMPLETE="complete";Im.EventType=Gi;Gi.OPEN="a";Gi.CLOSE="b";Gi.ERROR="c";Gi.MESSAGE="d";it.prototype.listen=it.prototype.O;K.prototype.listenOnce=K.prototype.P;K.prototype.getLastError=K.prototype.Sa;K.prototype.getLastErrorCode=K.prototype.Ia;K.prototype.getStatus=K.prototype.da;K.prototype.getResponseJson=K.prototype.Wa;K.prototype.getResponseText=K.prototype.ja;K.prototype.send=K.prototype.ha;K.prototype.setWithCredentials=K.prototype.Oa;Ft.prototype.digest=Ft.prototype.l;Ft.prototype.reset=Ft.prototype.reset;Ft.prototype.update=Ft.prototype.j;H.prototype.add=H.prototype.add;H.prototype.multiply=H.prototype.R;H.prototype.modulo=H.prototype.gb;H.prototype.compare=H.prototype.X;H.prototype.toNumber=H.prototype.ea;H.prototype.toString=H.prototype.toString;H.prototype.getBits=H.prototype.D;H.fromNumber=Bt;H.fromString=_l;var Xm=H;const _h="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke=new As("@firebase/firestore");function Et(i,...e){if(Ke.logLevel<=Z.DEBUG){const n=e.map(po);Ke.debug(`Firestore (${Yi}): ${i}`,...n)}}function fo(i,...e){if(Ke.logLevel<=Z.ERROR){const n=e.map(po);Ke.error(`Firestore (${Yi}): ${i}`,...n)}}function Jm(i,...e){if(Ke.logLevel<=Z.WARN){const n=e.map(po);Ke.warn(`Firestore (${Yi}): ${i}`,...n)}}function po(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(i="Unexpected state"){const e=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+i;throw fo(e),new Error(e)}function Es(i,e){i||_o()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ym{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class Qm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tg{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const a=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new We;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new We,e.enqueueRetryable(()=>a(this.currentUser))};const l=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},_=p=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(p=>_(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?_(p):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new We)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Es(typeof s.accessToken=="string"),new ml(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Es(e===null||typeof e=="string"),new at(e)}}class eg{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ig{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new eg(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ng{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rg{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const s=u=>{u.error!=null&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.R;return this.R=u.token,Et("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const a=u=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?a(u):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Es(typeof n.token=="string"),this.R=n.token,new ng(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=sg(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<n&&(s+=e.charAt(a[u]%e.length))}return s}}function gl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n,s,a,u,l,_,p,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=_,this.longPollingOptions=p,this.useFetchStreams=v}}class Gn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Gn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Gn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mh,B;(B=mh||(mh={}))[B.OK=0]="OK",B[B.CANCELLED=1]="CANCELLED",B[B.UNKNOWN=2]="UNKNOWN",B[B.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",B[B.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",B[B.NOT_FOUND=5]="NOT_FOUND",B[B.ALREADY_EXISTS=6]="ALREADY_EXISTS",B[B.PERMISSION_DENIED=7]="PERMISSION_DENIED",B[B.UNAUTHENTICATED=16]="UNAUTHENTICATED",B[B.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",B[B.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",B[B.ABORTED=10]="ABORTED",B[B.OUT_OF_RANGE=11]="OUT_OF_RANGE",B[B.UNIMPLEMENTED=12]="UNIMPLEMENTED",B[B.INTERNAL=13]="INTERNAL",B[B.UNAVAILABLE=14]="UNAVAILABLE",B[B.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Xm([4294967295,4294967295],0);function rs(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,s=1e3,a=1.5,u=6e4){this.si=e,this.timerId=n,this.Fo=s,this.Mo=a,this.xo=u,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),s=Math.max(0,Date.now()-this.Bo),a=Math.max(0,n-s);a>0&&Et("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,a,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,s,a,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new We,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,u){const l=Date.now()+s,_=new mo(e,n,l,a,u);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ug(i,e){if(fo("AsyncQueue",`${e}: ${i}`),gl(i))return new ut(ht.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=at.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async u=>{Et("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(Et("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ut(ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new We;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=ug(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map;function cg(i,e,n,s){if(e===!0&&s===!0)throw new ut(ht.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function dg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":_o()}function fg(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ut(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dg(i);throw new ut(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ut(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ut(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vl((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ut(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ut(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ut(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yl{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ut(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ut(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vh(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Ym;switch(s.type){case"firstParty":return new ig(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ut(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=gh.get(n);s&&(Et("ComponentProvider","Removing Datastore"),gh.delete(n),s.terminate())}(this),Promise.resolve()}}function pg(i,e,n,s={}){var a;const u=(i=fg(i,yl))._getSettings(),l=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==l&&Jm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),s.mockUserToken){let _,p;if(typeof s.mockUserToken=="string")_=s.mockUserToken,p=at.MOCK_USER;else{_=Ld(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new ut(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new at(v)}i._authCredentials=new Qm(new ml(_,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new hg(this,"async_queue_retry"),this.iu=()=>{const n=rs();n&&Et("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=rs();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=rs();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new We;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!gl(e))throw e;Et("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(s=>{this.eu=s,this.tu=!1;const a=function(l){let _=l.message||"";return l.stack&&(_=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),_}(s);throw fo("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.tu=!1,s))));return this.Ja=n,n}enqueueAfterDelay(e,n,s){this.su(),this.ru.indexOf(e)>-1&&(n=0);const a=mo.createAndSchedule(this,e,n,s,u=>this.au(u));return this.Xa.push(a),a}su(){this.eu&&_o()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}class mg extends yl{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=function(){return new _g}(),this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vg(this),this._firestoreClient.terminate()}}function gg(i,e){const n=typeof i=="object"?i:Bh(),s=typeof i=="string"?i:e||"(default)",a=ks(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const u=Id("firestore");u&&pg(a,...u)}return a}function vg(i){var e,n,s;const a=i._freezeSettings(),u=function(_,p,v,E){return new ag(_,p,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,vl(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._firestoreClient=new lg(i._authCredentials,i._appCheckCredentials,i._queue,u),!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.localCache.kind,_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider})}(function(e,n=!0){(function(a){Yi=a})(Ye),Ge(new Le("firestore",(s,{instanceIdentifier:a,options:u})=>{const l=s.getProvider("app").getImmediate(),_=new mg(new tg(s.getProvider("auth-internal")),new rg(s.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ut(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gn(v.options.projectId,E)}(l,a),l);return u=Object.assign({useFetchStreams:n},u),_._setSettings(u),_},"PUBLIC").setMultipleInstances(!0)),le(_h,"4.4.0",e),le(_h,"4.4.0","esm2017")})();const wl={apiKey:"AIzaSyD1vvaK-oNpeTLf3YtM5m1dKxHAkgwGR1E",authDomain:"quizapp-2aaae.firebaseapp.com",projectId:"quizapp-2aaae",storageBucket:"quizapp-2aaae.appspot.com",messagingSenderId:"411028115203",appId:"1:411028115203:web:c8807d7f082a2c5a3fa336",measurementId:"G-8RGM6YSZ36"},Tl=Os(wl);q_(Tl);gg(Tl);Os(wl);var yh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,e){(function(n,s){s(e)})(qc,function(n){var s="1.9.4";function a(t){var r,o,h,c;for(o=1,h=arguments.length;o<h;o++){c=arguments[o];for(r in c)t[r]=c[r]}return t}var u=Object.create||function(){function t(){}return function(r){return t.prototype=r,new t}}();function l(t,r){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var h=o.call(arguments,2);return function(){return t.apply(r,h.length?h.concat(o.call(arguments)):arguments)}}var _=0;function p(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function v(t,r,o){var h,c,d,f;return f=function(){h=!1,c&&(d.apply(o,c),c=!1)},d=function(){h?c=arguments:(t.apply(o,arguments),setTimeout(f,r),h=!0)},d}function E(t,r,o){var h=r[1],c=r[0],d=h-c;return t===h&&o?t:((t-c)%d+d)%d+c}function I(){return!1}function F(t,r){if(r===!1)return t;var o=Math.pow(10,r===void 0?6:r);return Math.round(t*o)/o}function Q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function tt(t){return Q(t).split(/\s+/)}function U(t,r){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var o in r)t.options[o]=r[o];return t.options}function Ae(t,r,o){var h=[];for(var c in t)h.push(encodeURIComponent(o?c.toUpperCase():c)+"="+encodeURIComponent(t[c]));return(!r||r.indexOf("?")===-1?"?":"&")+h.join("&")}var Qi=/\{ *([\w_ -]+) *\}/g;function ni(t,r){return t.replace(Qi,function(o,h){var c=r[h];if(c===void 0)throw new Error("No value provided for variable "+o);return typeof c=="function"&&(c=c(r)),c})}var ft=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function xe(t,r){for(var o=0;o<t.length;o++)if(t[o]===r)return o;return-1}var fe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pe(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ri=0;function tn(t){var r=+new Date,o=Math.max(0,16-(r-ri));return ri=r+o,window.setTimeout(t,o)}var _e=window.requestAnimationFrame||pe("RequestAnimationFrame")||tn,en=window.cancelAnimationFrame||pe("CancelAnimationFrame")||pe("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function gt(t,r,o){if(o&&_e===tn)t.call(r);else return _e.call(window,l(t,r))}function Pt(t){t&&en.call(window,t)}var El={__proto__:null,extend:a,create:u,bind:l,get lastId(){return _},stamp:p,throttle:v,wrapNum:E,falseFn:I,formatNum:F,trim:Q,splitWords:tt,setOptions:U,getParamString:Ae,template:ni,isArray:ft,indexOf:xe,emptyImageUrl:fe,requestFn:_e,cancelFn:en,requestAnimFrame:gt,cancelAnimFrame:Pt};function Zt(){}Zt.extend=function(t){var r=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=r.__super__=this.prototype,h=u(o);h.constructor=r,r.prototype=h;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(r[c]=this[c]);return t.statics&&a(r,t.statics),t.includes&&(Pl(t.includes),a.apply(null,[h].concat(t.includes))),a(h,t),delete h.statics,delete h.includes,h.options&&(h.options=o.options?u(o.options):{},a(h.options,t.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,f=h._initHooks.length;d<f;d++)h._initHooks[d].call(this)}},r},Zt.include=function(t){var r=this.prototype.options;return a(this.prototype,t),t.options&&(this.prototype.options=r,this.mergeOptions(t.options)),this},Zt.mergeOptions=function(t){return a(this.prototype.options,t),this},Zt.addInitHook=function(t){var r=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function Pl(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=ft(t)?t:[t];for(var r=0;r<t.length;r++)t[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Tt={on:function(t,r,o){if(typeof t=="object")for(var h in t)this._on(h,t[h],r);else{t=tt(t);for(var c=0,d=t.length;c<d;c++)this._on(t[c],r,o)}return this},off:function(t,r,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var h in t)this._off(h,t[h],r);else{t=tt(t);for(var c=arguments.length===1,d=0,f=t.length;d<f;d++)c?this._off(t[d]):this._off(t[d],r,o)}return this},_on:function(t,r,o,h){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(t,r,o)===!1){o===this&&(o=void 0);var c={fn:r,ctx:o};h&&(c.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(c)}},_off:function(t,r,o){var h,c,d;if(this._events&&(h=this._events[t],!!h)){if(arguments.length===1){if(this._firingCount)for(c=0,d=h.length;c<d;c++)h[c].fn=I;delete this._events[t];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var f=this._listens(t,r,o);if(f!==!1){var m=h[f];this._firingCount&&(m.fn=I,this._events[t]=h=h.slice()),h.splice(f,1)}}},fire:function(t,r,o){if(!this.listens(t,o))return this;var h=a({},r,{type:t,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var c=this._events[t];if(c){this._firingCount=this._firingCount+1||1;for(var d=0,f=c.length;d<f;d++){var m=c[d],g=m.fn;m.once&&this.off(t,g,m.ctx),g.call(m.ctx||this,h)}this._firingCount--}}return o&&this._propagateEvent(h),this},listens:function(t,r,o,h){typeof t!="string"&&console.warn('"string" type argument expected');var c=r;typeof r!="function"&&(h=!!r,c=void 0,o=void 0);var d=this._events&&this._events[t];if(d&&d.length&&this._listens(t,c,o)!==!1)return!0;if(h){for(var f in this._eventParents)if(this._eventParents[f].listens(t,r,o,h))return!0}return!1},_listens:function(t,r,o){if(!this._events)return!1;var h=this._events[t]||[];if(!r)return!!h.length;o===this&&(o=void 0);for(var c=0,d=h.length;c<d;c++)if(h[c].fn===r&&h[c].ctx===o)return c;return!1},once:function(t,r,o){if(typeof t=="object")for(var h in t)this._on(h,t[h],r,!0);else{t=tt(t);for(var c=0,d=t.length;c<d;c++)this._on(t[c],r,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[p(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[p(t)],this},_propagateEvent:function(t){for(var r in this._eventParents)this._eventParents[r].fire(t.type,a({layer:t.target,propagatedFrom:t.target},t),!0)}};Tt.addEventListener=Tt.on,Tt.removeEventListener=Tt.clearAllEventListeners=Tt.off,Tt.addOneTimeEventListener=Tt.once,Tt.fireEvent=Tt.fire,Tt.hasEventListeners=Tt.listens;var si=Zt.extend(Tt);function x(t,r,o){this.x=o?Math.round(t):t,this.y=o?Math.round(r):r}var go=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};x.prototype={clone:function(){return new x(this.x,this.y)},add:function(t){return this.clone()._add(C(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(C(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new x(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new x(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=go(this.x),this.y=go(this.y),this},distanceTo:function(t){t=C(t);var r=t.x-this.x,o=t.y-this.y;return Math.sqrt(r*r+o*o)},equals:function(t){return t=C(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=C(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+F(this.x)+", "+F(this.y)+")"}};function C(t,r,o){return t instanceof x?t:ft(t)?new x(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new x(t.x,t.y):new x(t,r,o)}function W(t,r){if(t)for(var o=r?[t,r]:t,h=0,c=o.length;h<c;h++)this.extend(o[h])}W.prototype={extend:function(t){var r,o;if(!t)return this;if(t instanceof x||typeof t[0]=="number"||"x"in t)r=o=C(t);else if(t=vt(t),r=t.min,o=t.max,!r||!o)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=o.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return C((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return C(this.min.x,this.max.y)},getTopRight:function(){return C(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var r,o;return typeof t[0]=="number"||t instanceof x?t=C(t):t=vt(t),t instanceof W?(r=t.min,o=t.max):r=o=t,r.x>=this.min.x&&o.x<=this.max.x&&r.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=vt(t);var r=this.min,o=this.max,h=t.min,c=t.max,d=c.x>=r.x&&h.x<=o.x,f=c.y>=r.y&&h.y<=o.y;return d&&f},overlaps:function(t){t=vt(t);var r=this.min,o=this.max,h=t.min,c=t.max,d=c.x>r.x&&h.x<o.x,f=c.y>r.y&&h.y<o.y;return d&&f},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var r=this.min,o=this.max,h=Math.abs(r.x-o.x)*t,c=Math.abs(r.y-o.y)*t;return vt(C(r.x-h,r.y-c),C(o.x+h,o.y+c))},equals:function(t){return t?(t=vt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function vt(t,r){return!t||t instanceof W?t:new W(t,r)}function yt(t,r){if(t)for(var o=r?[t,r]:t,h=0,c=o.length;h<c;h++)this.extend(o[h])}yt.prototype={extend:function(t){var r=this._southWest,o=this._northEast,h,c;if(t instanceof j)h=t,c=t;else if(t instanceof yt){if(h=t._southWest,c=t._northEast,!h||!c)return this}else return t?this.extend(N(t)||X(t)):this;return!r&&!o?(this._southWest=new j(h.lat,h.lng),this._northEast=new j(c.lat,c.lng)):(r.lat=Math.min(h.lat,r.lat),r.lng=Math.min(h.lng,r.lng),o.lat=Math.max(c.lat,o.lat),o.lng=Math.max(c.lng,o.lng)),this},pad:function(t){var r=this._southWest,o=this._northEast,h=Math.abs(r.lat-o.lat)*t,c=Math.abs(r.lng-o.lng)*t;return new yt(new j(r.lat-h,r.lng-c),new j(o.lat+h,o.lng+c))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof j||"lat"in t?t=N(t):t=X(t);var r=this._southWest,o=this._northEast,h,c;return t instanceof yt?(h=t.getSouthWest(),c=t.getNorthEast()):h=c=t,h.lat>=r.lat&&c.lat<=o.lat&&h.lng>=r.lng&&c.lng<=o.lng},intersects:function(t){t=X(t);var r=this._southWest,o=this._northEast,h=t.getSouthWest(),c=t.getNorthEast(),d=c.lat>=r.lat&&h.lat<=o.lat,f=c.lng>=r.lng&&h.lng<=o.lng;return d&&f},overlaps:function(t){t=X(t);var r=this._southWest,o=this._northEast,h=t.getSouthWest(),c=t.getNorthEast(),d=c.lat>r.lat&&h.lat<o.lat,f=c.lng>r.lng&&h.lng<o.lng;return d&&f},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,r){return t?(t=X(t),this._southWest.equals(t.getSouthWest(),r)&&this._northEast.equals(t.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(t,r){return t instanceof yt?t:new yt(t,r)}function j(t,r,o){if(isNaN(t)||isNaN(r))throw new Error("Invalid LatLng object: ("+t+", "+r+")");this.lat=+t,this.lng=+r,o!==void 0&&(this.alt=+o)}j.prototype={equals:function(t,r){if(!t)return!1;t=N(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(r===void 0?1e-9:r)},toString:function(t){return"LatLng("+F(this.lat,t)+", "+F(this.lng,t)+")"},distanceTo:function(t){return te.distance(this,N(t))},wrap:function(){return te.wrapLatLng(this)},toBounds:function(t){var r=180*t/40075017,o=r/Math.cos(Math.PI/180*this.lat);return X([this.lat-r,this.lng-o],[this.lat+r,this.lng+o])},clone:function(){return new j(this.lat,this.lng,this.alt)}};function N(t,r,o){return t instanceof j?t:ft(t)&&typeof t[0]!="object"?t.length===3?new j(t[0],t[1],t[2]):t.length===2?new j(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new j(t.lat,"lng"in t?t.lng:t.lon,t.alt):r===void 0?null:new j(t,r,o)}var Ht={latLngToPoint:function(t,r){var o=this.projection.project(t),h=this.scale(r);return this.transformation._transform(o,h)},pointToLatLng:function(t,r){var o=this.scale(r),h=this.transformation.untransform(t,o);return this.projection.unproject(h)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var r=this.projection.bounds,o=this.scale(t),h=this.transformation.transform(r.min,o),c=this.transformation.transform(r.max,o);return new W(h,c)},infinite:!1,wrapLatLng:function(t){var r=this.wrapLng?E(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?E(t.lat,this.wrapLat,!0):t.lat,h=t.alt;return new j(o,r,h)},wrapLatLngBounds:function(t){var r=t.getCenter(),o=this.wrapLatLng(r),h=r.lat-o.lat,c=r.lng-o.lng;if(h===0&&c===0)return t;var d=t.getSouthWest(),f=t.getNorthEast(),m=new j(d.lat-h,d.lng-c),g=new j(f.lat-h,f.lng-c);return new yt(m,g)}},te=a({},Ht,{wrapLng:[-180,180],R:6371e3,distance:function(t,r){var o=Math.PI/180,h=t.lat*o,c=r.lat*o,d=Math.sin((r.lat-t.lat)*o/2),f=Math.sin((r.lng-t.lng)*o/2),m=d*d+Math.cos(h)*Math.cos(c)*f*f,g=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return this.R*g}}),vo=6378137,cr={R:vo,MAX_LATITUDE:85.0511287798,project:function(t){var r=Math.PI/180,o=this.MAX_LATITUDE,h=Math.max(Math.min(o,t.lat),-o),c=Math.sin(h*r);return new x(this.R*t.lng*r,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(t){var r=180/Math.PI;return new j((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*r,t.x*r/this.R)},bounds:function(){var t=vo*Math.PI;return new W([-t,-t],[t,t])}()};function dr(t,r,o,h){if(ft(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=r,this._c=o,this._d=h}dr.prototype={transform:function(t,r){return this._transform(t.clone(),r)},_transform:function(t,r){return r=r||1,t.x=r*(this._a*t.x+this._b),t.y=r*(this._c*t.y+this._d),t},untransform:function(t,r){return r=r||1,new x((t.x/r-this._b)/this._a,(t.y/r-this._d)/this._c)}};function oi(t,r,o,h){return new dr(t,r,o,h)}var fr=a({},te,{code:"EPSG:3857",projection:cr,transformation:function(){var t=.5/(Math.PI*cr.R);return oi(t,.5,-t,.5)}()}),Il=a({},fr,{code:"EPSG:900913"});function yo(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function wo(t,r){var o="",h,c,d,f,m,g;for(h=0,d=t.length;h<d;h++){for(m=t[h],c=0,f=m.length;c<f;c++)g=m[c],o+=(c?"L":"M")+g.x+" "+g.y;o+=r?P.svg?"z":"x":""}return o||"M0 0"}var pr=document.documentElement.style,nn="ActiveXObject"in window,Sl=nn&&!document.addEventListener,To="msLaunchUri"in navigator&&!("documentMode"in document),_r=kt("webkit"),Eo=kt("android"),Po=kt("android 2")||kt("android 3"),Ll=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),bl=Eo&&kt("Google")&&Ll<537&&!("AudioNode"in window),mr=!!window.opera,Io=!To&&kt("chrome"),So=kt("gecko")&&!_r&&!mr&&!nn,Cl=!Io&&kt("safari"),Lo=kt("phantom"),bo="OTransition"in pr,Al=navigator.platform.indexOf("Win")===0,Co=nn&&"transition"in pr,gr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Po,Ao="MozPerspective"in pr,xl=!window.L_DISABLE_3D&&(Co||gr||Ao)&&!bo&&!Lo,ai=typeof orientation<"u"||kt("mobile"),kl=ai&&_r,Ol=ai&&gr,xo=!window.PointerEvent&&window.MSPointerEvent,ko=!!(window.PointerEvent||xo),Oo="ontouchstart"in window||!!window.TouchEvent,Rl=!window.L_NO_TOUCH&&(Oo||ko),Ml=ai&&mr,Nl=ai&&So,Dl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Bl=function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",I,r),window.removeEventListener("testPassiveEventSupport",I,r)}catch{}return t}(),zl=function(){return!!document.createElement("canvas").getContext}(),vr=!!(document.createElementNS&&yo("svg").createSVGRect),Ul=!!vr&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Fl=!vr&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var r=t.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}(),Zl=navigator.platform.indexOf("Mac")===0,Hl=navigator.platform.indexOf("Linux")===0;function kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var P={ie:nn,ielt9:Sl,edge:To,webkit:_r,android:Eo,android23:Po,androidStock:bl,opera:mr,chrome:Io,gecko:So,safari:Cl,phantom:Lo,opera12:bo,win:Al,ie3d:Co,webkit3d:gr,gecko3d:Ao,any3d:xl,mobile:ai,mobileWebkit:kl,mobileWebkit3d:Ol,msPointer:xo,pointer:ko,touch:Rl,touchNative:Oo,mobileOpera:Ml,mobileGecko:Nl,retina:Dl,passiveEvents:Bl,canvas:zl,svg:vr,vml:Fl,inlineSvg:Ul,mac:Zl,linux:Hl},Ro=P.msPointer?"MSPointerDown":"pointerdown",Mo=P.msPointer?"MSPointerMove":"pointermove",No=P.msPointer?"MSPointerUp":"pointerup",Do=P.msPointer?"MSPointerCancel":"pointercancel",yr={touchstart:Ro,touchmove:Mo,touchend:No,touchcancel:Do},Bo={touchstart:ql,touchmove:rn,touchend:rn,touchcancel:rn},ke={},zo=!1;function jl(t,r,o){return r==="touchstart"&&Gl(),Bo[r]?(o=Bo[r].bind(this,o),t.addEventListener(yr[r],o,!1),o):(console.warn("wrong event specified:",r),I)}function Vl(t,r,o){if(!yr[r]){console.warn("wrong event specified:",r);return}t.removeEventListener(yr[r],o,!1)}function $l(t){ke[t.pointerId]=t}function Wl(t){ke[t.pointerId]&&(ke[t.pointerId]=t)}function Uo(t){delete ke[t.pointerId]}function Gl(){zo||(document.addEventListener(Ro,$l,!0),document.addEventListener(Mo,Wl,!0),document.addEventListener(No,Uo,!0),document.addEventListener(Do,Uo,!0),zo=!0)}function rn(t,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var o in ke)r.touches.push(ke[o]);r.changedTouches=[r],t(r)}}function ql(t,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&rt(r),rn(t,r)}function Kl(t){var r={},o,h;for(h in t)o=t[h],r[h]=o&&o.bind?o.bind(t):o;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var Xl=200;function Jl(t,r){t.addEventListener("dblclick",r);var o=0,h;function c(d){if(d.detail!==1){h=d.detail;return}if(!(d.pointerType==="mouse"||d.sourceCapabilities&&!d.sourceCapabilities.firesTouchEvents)){var f=Vo(d);if(!(f.some(function(g){return g instanceof HTMLLabelElement&&g.attributes.for})&&!f.some(function(g){return g instanceof HTMLInputElement||g instanceof HTMLSelectElement}))){var m=Date.now();m-o<=Xl?(h++,h===2&&r(Kl(d))):h=1,o=m}}}return t.addEventListener("click",c),{dblclick:r,simDblclick:c}}function Yl(t,r){t.removeEventListener("dblclick",r.dblclick),t.removeEventListener("click",r.simDblclick)}var wr=an(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hi=an(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fo=hi==="webkitTransition"||hi==="OTransition"?hi+"End":"transitionend";function Zo(t){return typeof t=="string"?document.getElementById(t):t}function ui(t,r){var o=t.style[r]||t.currentStyle&&t.currentStyle[r];if((!o||o==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(t,null);o=h?h[r]:null}return o==="auto"?null:o}function z(t,r,o){var h=document.createElement(t);return h.className=r||"",o&&o.appendChild(h),h}function G(t){var r=t.parentNode;r&&r.removeChild(t)}function sn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Oe(t){var r=t.parentNode;r&&r.lastChild!==t&&r.appendChild(t)}function Re(t){var r=t.parentNode;r&&r.firstChild!==t&&r.insertBefore(t,r.firstChild)}function Tr(t,r){if(t.classList!==void 0)return t.classList.contains(r);var o=on(t);return o.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(o)}function O(t,r){if(t.classList!==void 0)for(var o=tt(r),h=0,c=o.length;h<c;h++)t.classList.add(o[h]);else if(!Tr(t,r)){var d=on(t);Er(t,(d?d+" ":"")+r)}}function q(t,r){t.classList!==void 0?t.classList.remove(r):Er(t,Q((" "+on(t)+" ").replace(" "+r+" "," ")))}function Er(t,r){t.className.baseVal===void 0?t.className=r:t.className.baseVal=r}function on(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function It(t,r){"opacity"in t.style?t.style.opacity=r:"filter"in t.style&&Ql(t,r)}function Ql(t,r){var o=!1,h="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(h)}catch{if(r===1)return}r=Math.round(r*100),o?(o.Enabled=r!==100,o.Opacity=r):t.style.filter+=" progid:"+h+"(opacity="+r+")"}function an(t){for(var r=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in r)return t[o];return!1}function me(t,r,o){var h=r||new x(0,0);t.style[wr]=(P.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(o?" scale("+o+")":"")}function J(t,r){t._leaflet_pos=r,P.any3d?me(t,r):(t.style.left=r.x+"px",t.style.top=r.y+"px")}function ge(t){return t._leaflet_pos||new x(0,0)}var li,ci,Pr;if("onselectstart"in document)li=function(){k(window,"selectstart",rt)},ci=function(){V(window,"selectstart",rt)};else{var di=an(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);li=function(){if(di){var t=document.documentElement.style;Pr=t[di],t[di]="none"}},ci=function(){di&&(document.documentElement.style[di]=Pr,Pr=void 0)}}function Ir(){k(window,"dragstart",rt)}function Sr(){V(window,"dragstart",rt)}var hn,Lr;function br(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(un(),hn=t,Lr=t.style.outlineStyle,t.style.outlineStyle="none",k(window,"keydown",un))}function un(){hn&&(hn.style.outlineStyle=Lr,hn=void 0,Lr=void 0,V(window,"keydown",un))}function Ho(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Cr(t){var r=t.getBoundingClientRect();return{x:r.width/t.offsetWidth||1,y:r.height/t.offsetHeight||1,boundingClientRect:r}}var tc={__proto__:null,TRANSFORM:wr,TRANSITION:hi,TRANSITION_END:Fo,get:Zo,getStyle:ui,create:z,remove:G,empty:sn,toFront:Oe,toBack:Re,hasClass:Tr,addClass:O,removeClass:q,setClass:Er,getClass:on,setOpacity:It,testProp:an,setTransform:me,setPosition:J,getPosition:ge,get disableTextSelection(){return li},get enableTextSelection(){return ci},disableImageDrag:Ir,enableImageDrag:Sr,preventOutline:br,restoreOutline:un,getSizedParentNode:Ho,getScale:Cr};function k(t,r,o,h){if(r&&typeof r=="object")for(var c in r)xr(t,c,r[c],o);else{r=tt(r);for(var d=0,f=r.length;d<f;d++)xr(t,r[d],o,h)}return this}var Ot="_leaflet_events";function V(t,r,o,h){if(arguments.length===1)jo(t),delete t[Ot];else if(r&&typeof r=="object")for(var c in r)kr(t,c,r[c],o);else if(r=tt(r),arguments.length===2)jo(t,function(m){return xe(r,m)!==-1});else for(var d=0,f=r.length;d<f;d++)kr(t,r[d],o,h);return this}function jo(t,r){for(var o in t[Ot]){var h=o.split(/\d/)[0];(!r||r(h))&&kr(t,h,null,null,o)}}var Ar={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xr(t,r,o,h){var c=r+p(o)+(h?"_"+p(h):"");if(t[Ot]&&t[Ot][c])return this;var d=function(m){return o.call(h||t,m||window.event)},f=d;!P.touchNative&&P.pointer&&r.indexOf("touch")===0?d=jl(t,r,d):P.touch&&r==="dblclick"?d=Jl(t,d):"addEventListener"in t?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?t.addEventListener(Ar[r]||r,d,P.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(d=function(m){m=m||window.event,Rr(t,m)&&f(m)},t.addEventListener(Ar[r],d,!1)):t.addEventListener(r,f,!1):t.attachEvent("on"+r,d),t[Ot]=t[Ot]||{},t[Ot][c]=d}function kr(t,r,o,h,c){c=c||r+p(o)+(h?"_"+p(h):"");var d=t[Ot]&&t[Ot][c];if(!d)return this;!P.touchNative&&P.pointer&&r.indexOf("touch")===0?Vl(t,r,d):P.touch&&r==="dblclick"?Yl(t,d):"removeEventListener"in t?t.removeEventListener(Ar[r]||r,d,!1):t.detachEvent("on"+r,d),t[Ot][c]=null}function ve(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Or(t){return xr(t,"wheel",ve),this}function fi(t){return k(t,"mousedown touchstart dblclick contextmenu",ve),t._leaflet_disable_click=!0,this}function rt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ye(t){return rt(t),ve(t),this}function Vo(t){if(t.composedPath)return t.composedPath();for(var r=[],o=t.target;o;)r.push(o),o=o.parentNode;return r}function $o(t,r){if(!r)return new x(t.clientX,t.clientY);var o=Cr(r),h=o.boundingClientRect;return new x((t.clientX-h.left)/o.x-r.clientLeft,(t.clientY-h.top)/o.y-r.clientTop)}var ec=P.linux&&P.chrome?window.devicePixelRatio:P.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wo(t){return P.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ec:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Rr(t,r){var o=r.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var ic={__proto__:null,on:k,off:V,stopPropagation:ve,disableScrollPropagation:Or,disableClickPropagation:fi,preventDefault:rt,stop:ye,getPropagationPath:Vo,getMousePosition:$o,getWheelDelta:Wo,isExternalTarget:Rr,addListener:k,removeListener:V},Go=si.extend({run:function(t,r,o,h){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=ge(t),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=gt(this._animate,this),this._step()},_step:function(t){var r=+new Date-this._startTime,o=this._duration*1e3;r<o?this._runFrame(this._easeOut(r/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,r){var o=this._startPos.add(this._offset.multiplyBy(t));r&&o._round(),J(this._el,o),this.fire("step")},_complete:function(){Pt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),D=si.extend({options:{crs:fr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,r){r=U(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(N(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=hi&&P.any3d&&!P.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),k(this._proxy,Fo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,r,o){if(r=r===void 0?this._zoom:this._limitZoom(r),t=this._limitCenter(N(t),r,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=a({animate:o.animate},o.zoom),o.pan=a({animate:o.animate,duration:o.duration},o.pan));var h=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,r,o.zoom):this._tryAnimatedPan(t,o.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(t,r,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,r){return this._loaded?this.setView(this.getCenter(),t,{zoom:r}):(this._zoom=t,this)},zoomIn:function(t,r){return t=t||(P.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,r)},zoomOut:function(t,r){return t=t||(P.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,r)},setZoomAround:function(t,r,o){var h=this.getZoomScale(r),c=this.getSize().divideBy(2),d=t instanceof x?t:this.latLngToContainerPoint(t),f=d.subtract(c).multiplyBy(1-1/h),m=this.containerPointToLatLng(c.add(f));return this.setView(m,r,{zoom:o})},_getBoundsCenterZoom:function(t,r){r=r||{},t=t.getBounds?t.getBounds():X(t);var o=C(r.paddingTopLeft||r.padding||[0,0]),h=C(r.paddingBottomRight||r.padding||[0,0]),c=this.getBoundsZoom(t,!1,o.add(h));if(c=typeof r.maxZoom=="number"?Math.min(r.maxZoom,c):c,c===1/0)return{center:t.getCenter(),zoom:c};var d=h.subtract(o).divideBy(2),f=this.project(t.getSouthWest(),c),m=this.project(t.getNorthEast(),c),g=this.unproject(f.add(m).divideBy(2).add(d),c);return{center:g,zoom:c}},fitBounds:function(t,r){if(t=X(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,r);return this.setView(o.center,o.zoom,r)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,r){return this.setView(t,this._zoom,{pan:r})},panBy:function(t,r){if(t=C(t).round(),r=r||{},!t.x&&!t.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Go,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){O(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,r.duration||.25,r.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,r,o){if(o=o||{},o.animate===!1||!P.any3d)return this.setView(t,r,o);this._stop();var h=this.project(this.getCenter()),c=this.project(t),d=this.getSize(),f=this._zoom;t=N(t),r=r===void 0?f:r;var m=Math.max(d.x,d.y),g=m*this.getZoomScale(f,r),y=c.distanceTo(h)||1,T=1.42,S=T*T;function R(Y){var Tn=Y?-1:1,Vc=Y?g:m,$c=g*g-m*m+Tn*S*S*y*y,Wc=2*Vc*S*y,Vr=$c/Wc,ba=Math.sqrt(Vr*Vr+1)-Vr,Gc=ba<1e-9?-18:Math.log(ba);return Gc}function pt(Y){return(Math.exp(Y)-Math.exp(-Y))/2}function et(Y){return(Math.exp(Y)+Math.exp(-Y))/2}function Lt(Y){return pt(Y)/et(Y)}var wt=R(0);function Ue(Y){return m*(et(wt)/et(wt+T*Y))}function Fc(Y){return m*(et(wt)*Lt(wt+T*Y)-pt(wt))/S}function Zc(Y){return 1-Math.pow(1-Y,1.5)}var Hc=Date.now(),Sa=(R(1)-wt)/T,jc=o.duration?1e3*o.duration:1e3*Sa*.8;function La(){var Y=(Date.now()-Hc)/jc,Tn=Zc(Y)*Sa;Y<=1?(this._flyToFrame=gt(La,this),this._move(this.unproject(h.add(c.subtract(h).multiplyBy(Fc(Tn)/y)),f),this.getScaleZoom(m/Ue(Tn),f),{flyTo:!0})):this._move(t,r)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),La.call(this),this},flyToBounds:function(t,r){var o=this._getBoundsCenterZoom(t,r);return this.flyTo(o.center,o.zoom,r)},setMaxBounds:function(t){return t=X(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var r=this.options.minZoom;return this.options.minZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var r=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,r){this._enforcingBounds=!0;var o=this.getCenter(),h=this._limitCenter(o,this._zoom,X(t));return o.equals(h)||this.panTo(h,r),this._enforcingBounds=!1,this},panInside:function(t,r){r=r||{};var o=C(r.paddingTopLeft||r.padding||[0,0]),h=C(r.paddingBottomRight||r.padding||[0,0]),c=this.project(this.getCenter()),d=this.project(t),f=this.getPixelBounds(),m=vt([f.min.add(o),f.max.subtract(h)]),g=m.getSize();if(!m.contains(d)){this._enforcingBounds=!0;var y=d.subtract(m.getCenter()),T=m.extend(d).getSize().subtract(g);c.x+=y.x<0?-T.x:T.x,c.y+=y.y<0?-T.y:T.y,this.panTo(this.unproject(c),r),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=a({animate:!1,pan:!0},t===!0?{animate:!0}:t);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),h=r.divideBy(2).round(),c=o.divideBy(2).round(),d=h.subtract(c);return!d.x&&!d.y?this:(t.animate&&t.pan?this.panBy(d):(t.pan&&this._rawPanBy(d),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=a({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=l(this._handleGeolocationResponse,this),o=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,o,t):navigator.geolocation.getCurrentPosition(r,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var r=t.code,o=t.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var r=t.coords.latitude,o=t.coords.longitude,h=new j(r,o),c=h.toBounds(t.coords.accuracy*2),d=this._locateOptions;if(d.setView){var f=this.getBoundsZoom(c);this.setView(h,d.maxZoom?Math.min(f,d.maxZoom):f)}var m={latlng:h,bounds:c,timestamp:t.timestamp};for(var g in t.coords)typeof t.coords[g]=="number"&&(m[g]=t.coords[g]);this.fire("locationfound",m)}},addHandler:function(t,r){if(!r)return this;var o=this[t]=new r(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),G(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Pt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)G(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,r){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),h=z("div",o,r||this._mapPane);return t&&(this._panes[t]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),r=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new yt(r,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,r,o){t=X(t),o=C(o||[0,0]);var h=this.getZoom()||0,c=this.getMinZoom(),d=this.getMaxZoom(),f=t.getNorthWest(),m=t.getSouthEast(),g=this.getSize().subtract(o),y=vt(this.project(m,h),this.project(f,h)).getSize(),T=P.any3d?this.options.zoomSnap:1,S=g.x/y.x,R=g.y/y.y,pt=r?Math.max(S,R):Math.min(S,R);return h=this.getScaleZoom(pt,h),T&&(h=Math.round(h/(T/100))*(T/100),h=r?Math.ceil(h/T)*T:Math.floor(h/T)*T),Math.max(c,Math.min(d,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new x(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,r){var o=this._getTopLeftPoint(t,r);return new W(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,r){var o=this.options.crs;return r=r===void 0?this._zoom:r,o.scale(t)/o.scale(r)},getScaleZoom:function(t,r){var o=this.options.crs;r=r===void 0?this._zoom:r;var h=o.zoom(t*o.scale(r));return isNaN(h)?1/0:h},project:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(N(t),r)},unproject:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(C(t),r)},layerPointToLatLng:function(t){var r=C(t).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(t){var r=this.project(N(t))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(N(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(X(t))},distance:function(t,r){return this.options.crs.distance(N(t),N(r))},containerPointToLayerPoint:function(t){return C(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return C(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var r=this.containerPointToLayerPoint(C(t));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(N(t)))},mouseEventToContainerPoint:function(t){return $o(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var r=this._container=Zo(t);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");k(r,"scroll",this._onScroll,this),this._containerId=p(r)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&P.any3d,O(t,"leaflet-container"+(P.touch?" leaflet-touch":"")+(P.retina?" leaflet-retina":"")+(P.ielt9?" leaflet-oldie":"")+(P.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=ui(t,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),J(this._mapPane,new x(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(O(t.markerPane,"leaflet-zoom-hide"),O(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,r,o){J(this._mapPane,new x(0,0));var h=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var c=this._zoom!==r;this._moveStart(c,o)._move(t,r)._moveEnd(c),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(t,r){return t&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(t,r,o,h){r===void 0&&(r=this._zoom);var c=this._zoom!==r;return this._zoom=r,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),h?o&&o.pinch&&this.fire("zoom",o):((c||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Pt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){J(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[p(this._container)]=this;var r=t?V:k;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),P.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Pt(this._resizeRequest),this._resizeRequest=gt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,r){for(var o=[],h,c=r==="mouseout"||r==="mouseover",d=t.target||t.srcElement,f=!1;d;){if(h=this._targets[p(d)],h&&(r==="click"||r==="preclick")&&this._draggableMoved(h)){f=!0;break}if(h&&h.listens(r,!0)&&(c&&!Rr(d,t)||(o.push(h),c))||d===this._container)break;d=d.parentNode}return!o.length&&!f&&!c&&this.listens(r,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var r=t.target||t.srcElement;if(!(!this._loaded||r._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(r))){var o=t.type;o==="mousedown"&&br(r),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,r,o){if(t.type==="click"){var h=a({},t);h.type="preclick",this._fireDOMEvent(h,h.type,o)}var c=this._findEventTargets(t,r);if(o){for(var d=[],f=0;f<o.length;f++)o[f].listens(r,!0)&&d.push(o[f]);c=d.concat(c)}if(c.length){r==="contextmenu"&&rt(t);var m=c[0],g={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var y=m.getLatLng&&(!m._radius||m._radius<=10);g.containerPoint=y?this.latLngToContainerPoint(m.getLatLng()):this.mouseEventToContainerPoint(t),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=y?m.getLatLng():this.layerPointToLatLng(g.layerPoint)}for(f=0;f<c.length;f++)if(c[f].fire(r,g,!0),g.originalEvent._stopped||c[f].options.bubblingMouseEvents===!1&&xe(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,r=this._handlers.length;t<r;t++)this._handlers[t].disable()},whenReady:function(t,r){return this._loaded?t.call(r||this,{target:this}):this.on("load",t,r),this},_getMapPanePos:function(){return ge(this._mapPane)||new x(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,r){var o=t&&r!==void 0?this._getNewPixelOrigin(t,r):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,r){var o=this.getSize()._divideBy(2);return this.project(t,r)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,r,o){var h=this._getNewPixelOrigin(o,r);return this.project(t,r)._subtract(h)},_latLngBoundsToNewLayerBounds:function(t,r,o){var h=this._getNewPixelOrigin(o,r);return vt([this.project(t.getSouthWest(),r)._subtract(h),this.project(t.getNorthWest(),r)._subtract(h),this.project(t.getSouthEast(),r)._subtract(h),this.project(t.getNorthEast(),r)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,r,o){if(!o)return t;var h=this.project(t,r),c=this.getSize().divideBy(2),d=new W(h.subtract(c),h.add(c)),f=this._getBoundsOffset(d,o,r);return Math.abs(f.x)<=1&&Math.abs(f.y)<=1?t:this.unproject(h.add(f),r)},_limitOffset:function(t,r){if(!r)return t;var o=this.getPixelBounds(),h=new W(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(h,r))},_getBoundsOffset:function(t,r,o){var h=vt(this.project(r.getNorthEast(),o),this.project(r.getSouthWest(),o)),c=h.min.subtract(t.min),d=h.max.subtract(t.max),f=this._rebound(c.x,-d.x),m=this._rebound(c.y,-d.y);return new x(f,m)},_rebound:function(t,r){return t+r>0?Math.round(t-r)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(r))},_limitZoom:function(t){var r=this.getMinZoom(),o=this.getMaxZoom(),h=P.any3d?this.options.zoomSnap:1;return h&&(t=Math.round(t/h)*h),Math.max(r,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){q(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,r){var o=this._getCenterOffset(t)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,r),!0)},_createAnimProxy:function(){var t=this._proxy=z("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(r){var o=wr,h=this._proxy.style[o];me(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),h===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){G(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),r=this.getZoom();me(this._proxy,this.project(t,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,r,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(r),c=this._getCenterOffset(t)._divideBy(1-1/h);return o.animate!==!0&&!this.getSize().contains(c)?!1:(gt(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,r,!0)},this),!0)},_animateZoom:function(t,r,o,h){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=r,O(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:r,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&q(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function nc(t,r){return new D(t,r)}var At=Zt.extend({options:{position:"topright"},initialize:function(t){U(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var r=this._map;return r&&r.removeControl(this),this.options.position=t,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var r=this._container=this.onAdd(t),o=this.getPosition(),h=t._controlCorners[o];return O(r,"leaflet-control"),o.indexOf("bottom")!==-1?h.insertBefore(r,h.firstChild):h.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(G(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),pi=function(t){return new At(t)};D.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},r="leaflet-",o=this._controlContainer=z("div",r+"control-container",this._container);function h(c,d){var f=r+c+" "+r+d;t[c+d]=z("div",f,o)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)G(this._controlCorners[t]);G(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var qo=At.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,r,o,h){return o<h?-1:h<o?1:0}},initialize:function(t,r,o){U(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in t)this._addLayer(t[h],h);for(h in r)this._addLayer(r[h],h,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return At.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,r){return this._addLayer(t,r),this._map?this._update():this},addOverlay:function(t,r){return this._addLayer(t,r,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var r=this._getLayer(p(t));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){O(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(O(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):q(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return q(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",r=this._container=z("div",t),o=this.options.collapsed;r.setAttribute("aria-haspopup",!0),fi(r),Or(r);var h=this._section=z("section",t+"-list");o&&(this._map.on("click",this.collapse,this),k(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var c=this._layersLink=z("a",t+"-toggle",r);c.href="#",c.title="Layers",c.setAttribute("role","button"),k(c,{keydown:function(d){d.keyCode===13&&this._expandSafely()},click:function(d){rt(d),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=z("div",t+"-base",h),this._separator=z("div",t+"-separator",h),this._overlaysList=z("div",t+"-overlays",h),r.appendChild(h)},_getLayer:function(t){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&p(this._layers[r].layer)===t)return this._layers[r]},_addLayer:function(t,r,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:r,overlay:o}),this.options.sortLayers&&this._layers.sort(l(function(h,c){return this.options.sortFunction(h.layer,c.layer,h.name,c.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sn(this._baseLayersList),sn(this._overlaysList),this._layerControlInputs=[];var t,r,o,h,c=0;for(o=0;o<this._layers.length;o++)h=this._layers[o],this._addItem(h),r=r||h.overlay,t=t||!h.overlay,c+=h.overlay?0:1;return this.options.hideSingleBase&&(t=t&&c>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=r&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var r=this._getLayer(p(t.target)),o=r.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,r)},_createRadioElement:function(t,r){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(r?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=o,h.firstChild},_addItem:function(t){var r=document.createElement("label"),o=this._map.hasLayer(t.layer),h;t.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=o):h=this._createRadioElement("leaflet-base-layers_"+p(this),o),this._layerControlInputs.push(h),h.layerId=p(t.layer),k(h,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+t.name;var d=document.createElement("span");r.appendChild(d),d.appendChild(h),d.appendChild(c);var f=t.overlay?this._overlaysList:this._baseLayersList;return f.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,r,o,h=[],c=[];this._handlingClick=!0;for(var d=t.length-1;d>=0;d--)r=t[d],o=this._getLayer(r.layerId).layer,r.checked?h.push(o):r.checked||c.push(o);for(d=0;d<c.length;d++)this._map.hasLayer(c[d])&&this._map.removeLayer(c[d]);for(d=0;d<h.length;d++)this._map.hasLayer(h[d])||this._map.addLayer(h[d]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,r,o,h=this._map.getZoom(),c=t.length-1;c>=0;c--)r=t[c],o=this._getLayer(r.layerId).layer,r.disabled=o.options.minZoom!==void 0&&h<o.options.minZoom||o.options.maxZoom!==void 0&&h>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,k(t,"click",rt),this.expand();var r=this;setTimeout(function(){V(t,"click",rt),r._preventClick=!1})}}),rc=function(t,r,o){return new qo(t,r,o)},Mr=At.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var r="leaflet-control-zoom",o=z("div",r+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,r+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,r+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,r,o,h,c){var d=z("a",o,h);return d.innerHTML=t,d.href="#",d.title=r,d.setAttribute("role","button"),d.setAttribute("aria-label",r),fi(d),k(d,"click",ye),k(d,"click",c,this),k(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var t=this._map,r="leaflet-disabled";q(this._zoomInButton,r),q(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(O(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(O(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});D.mergeOptions({zoomControl:!0}),D.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Mr,this.addControl(this.zoomControl))});var sc=function(t){return new Mr(t)},Ko=At.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var r="leaflet-control-scale",o=z("div",r),h=this.options;return this._addScales(h,r+"-line",o),t.on(h.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,r,o){t.metric&&(this._mScale=z("div",r,o)),t.imperial&&(this._iScale=z("div",r,o))},_update:function(){var t=this._map,r=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,r]),t.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var r=this._getRoundNum(t),o=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,o,r/t)},_updateImperial:function(t){var r=t*3.2808399,o,h,c;r>5280?(o=r/5280,h=this._getRoundNum(o),this._updateScale(this._iScale,h+" mi",h/o)):(c=this._getRoundNum(r),this._updateScale(this._iScale,c+" ft",c/r))},_updateScale:function(t,r,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=r},_getRoundNum:function(t){var r=Math.pow(10,(Math.floor(t)+"").length-1),o=t/r;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,r*o}}),oc=function(t){return new Ko(t)},ac='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Nr=At.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(P.inlineSvg?ac+" ":"")+"Leaflet</a>"},initialize:function(t){U(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=z("div","leaflet-control-attribution"),fi(this._container);for(var r in t._layers)t._layers[r].getAttribution&&this.addAttribution(t._layers[r].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var r in this._attributions)this._attributions[r]&&t.push(r);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});D.mergeOptions({attributionControl:!0}),D.addInitHook(function(){this.options.attributionControl&&new Nr().addTo(this)});var hc=function(t){return new Nr(t)};At.Layers=qo,At.Zoom=Mr,At.Scale=Ko,At.Attribution=Nr,pi.layers=rc,pi.zoom=sc,pi.scale=oc,pi.attribution=hc;var Rt=Zt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Rt.addTo=function(t,r){return t.addHandler(r,this),this};var uc={Events:Tt},Xo=P.touch?"touchstart mousedown":"mousedown",ee=si.extend({options:{clickTolerance:3},initialize:function(t,r,o,h){U(this,h),this._element=t,this._dragStartTarget=r||t,this._preventOutline=o},enable:function(){this._enabled||(k(this._dragStartTarget,Xo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ee._dragging===this&&this.finishDrag(!0),V(this._dragStartTarget,Xo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Tr(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ee._dragging===this&&this.finishDrag();return}if(!(ee._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ee._dragging=this,this._preventOutline&&br(this._element),Ir(),li(),!this._moving)){this.fire("down");var r=t.touches?t.touches[0]:t,o=Ho(this._element);this._startPoint=new x(r.clientX,r.clientY),this._startPos=ge(this._element),this._parentScale=Cr(o);var h=t.type==="mousedown";k(document,h?"mousemove":"touchmove",this._onMove,this),k(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var r=t.touches&&t.touches.length===1?t.touches[0]:t,o=new x(r.clientX,r.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,rt(t),this._moved||(this.fire("dragstart"),this._moved=!0,O(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),O(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),J(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){q(document.body,"leaflet-dragging"),this._lastTarget&&(q(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),V(document,"mousemove touchmove",this._onMove,this),V(document,"mouseup touchend touchcancel",this._onUp,this),Sr(),ci();var r=this._moved&&this._moving;this._moving=!1,ee._dragging=!1,r&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Jo(t,r,o){var h,c=[1,4,2,8],d,f,m,g,y,T,S,R;for(d=0,T=t.length;d<T;d++)t[d]._code=we(t[d],r);for(m=0;m<4;m++){for(S=c[m],h=[],d=0,T=t.length,f=T-1;d<T;f=d++)g=t[d],y=t[f],g._code&S?y._code&S||(R=ln(y,g,S,r,o),R._code=we(R,r),h.push(R)):(y._code&S&&(R=ln(y,g,S,r,o),R._code=we(R,r),h.push(R)),h.push(g));t=h}return t}function Yo(t,r){var o,h,c,d,f,m,g,y,T;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var S=N([0,0]),R=X(t),pt=R.getNorthWest().distanceTo(R.getSouthWest())*R.getNorthEast().distanceTo(R.getNorthWest());pt<1700&&(S=Dr(t));var et=t.length,Lt=[];for(o=0;o<et;o++){var wt=N(t[o]);Lt.push(r.project(N([wt.lat-S.lat,wt.lng-S.lng])))}for(m=g=y=0,o=0,h=et-1;o<et;h=o++)c=Lt[o],d=Lt[h],f=c.y*d.x-d.y*c.x,g+=(c.x+d.x)*f,y+=(c.y+d.y)*f,m+=f*3;m===0?T=Lt[0]:T=[g/m,y/m];var Ue=r.unproject(C(T));return N([Ue.lat+S.lat,Ue.lng+S.lng])}function Dr(t){for(var r=0,o=0,h=0,c=0;c<t.length;c++){var d=N(t[c]);r+=d.lat,o+=d.lng,h++}return N([r/h,o/h])}var lc={__proto__:null,clipPolygon:Jo,polygonCenter:Yo,centroid:Dr};function Qo(t,r){if(!r||!t.length)return t.slice();var o=r*r;return t=fc(t,o),t=dc(t,o),t}function ta(t,r,o){return Math.sqrt(_i(t,r,o,!0))}function cc(t,r,o){return _i(t,r,o)}function dc(t,r){var o=t.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,c=new h(o);c[0]=c[o-1]=1,Br(t,c,r,0,o-1);var d,f=[];for(d=0;d<o;d++)c[d]&&f.push(t[d]);return f}function Br(t,r,o,h,c){var d=0,f,m,g;for(m=h+1;m<=c-1;m++)g=_i(t[m],t[h],t[c],!0),g>d&&(f=m,d=g);d>o&&(r[f]=1,Br(t,r,o,h,f),Br(t,r,o,f,c))}function fc(t,r){for(var o=[t[0]],h=1,c=0,d=t.length;h<d;h++)pc(t[h],t[c])>r&&(o.push(t[h]),c=h);return c<d-1&&o.push(t[d-1]),o}var ea;function ia(t,r,o,h,c){var d=h?ea:we(t,o),f=we(r,o),m,g,y;for(ea=f;;){if(!(d|f))return[t,r];if(d&f)return!1;m=d||f,g=ln(t,r,m,o,c),y=we(g,o),m===d?(t=g,d=y):(r=g,f=y)}}function ln(t,r,o,h,c){var d=r.x-t.x,f=r.y-t.y,m=h.min,g=h.max,y,T;return o&8?(y=t.x+d*(g.y-t.y)/f,T=g.y):o&4?(y=t.x+d*(m.y-t.y)/f,T=m.y):o&2?(y=g.x,T=t.y+f*(g.x-t.x)/d):o&1&&(y=m.x,T=t.y+f*(m.x-t.x)/d),new x(y,T,c)}function we(t,r){var o=0;return t.x<r.min.x?o|=1:t.x>r.max.x&&(o|=2),t.y<r.min.y?o|=4:t.y>r.max.y&&(o|=8),o}function pc(t,r){var o=r.x-t.x,h=r.y-t.y;return o*o+h*h}function _i(t,r,o,h){var c=r.x,d=r.y,f=o.x-c,m=o.y-d,g=f*f+m*m,y;return g>0&&(y=((t.x-c)*f+(t.y-d)*m)/g,y>1?(c=o.x,d=o.y):y>0&&(c+=f*y,d+=m*y)),f=t.x-c,m=t.y-d,h?f*f+m*m:new x(c,d)}function St(t){return!ft(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function na(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(t)}function ra(t,r){var o,h,c,d,f,m,g,y;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var T=N([0,0]),S=X(t),R=S.getNorthWest().distanceTo(S.getSouthWest())*S.getNorthEast().distanceTo(S.getNorthWest());R<1700&&(T=Dr(t));var pt=t.length,et=[];for(o=0;o<pt;o++){var Lt=N(t[o]);et.push(r.project(N([Lt.lat-T.lat,Lt.lng-T.lng])))}for(o=0,h=0;o<pt-1;o++)h+=et[o].distanceTo(et[o+1])/2;if(h===0)y=et[0];else for(o=0,d=0;o<pt-1;o++)if(f=et[o],m=et[o+1],c=f.distanceTo(m),d+=c,d>h){g=(d-h)/c,y=[m.x-g*(m.x-f.x),m.y-g*(m.y-f.y)];break}var wt=r.unproject(C(y));return N([wt.lat+T.lat,wt.lng+T.lng])}var _c={__proto__:null,simplify:Qo,pointToSegmentDistance:ta,closestPointOnSegment:cc,clipSegment:ia,_getEdgeIntersection:ln,_getBitCode:we,_sqClosestPointOnSegment:_i,isFlat:St,_flat:na,polylineCenter:ra},zr={project:function(t){return new x(t.lng,t.lat)},unproject:function(t){return new j(t.y,t.x)},bounds:new W([-180,-90],[180,90])},Ur={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var r=Math.PI/180,o=this.R,h=t.lat*r,c=this.R_MINOR/o,d=Math.sqrt(1-c*c),f=d*Math.sin(h),m=Math.tan(Math.PI/4-h/2)/Math.pow((1-f)/(1+f),d/2);return h=-o*Math.log(Math.max(m,1e-10)),new x(t.lng*r*o,h)},unproject:function(t){for(var r=180/Math.PI,o=this.R,h=this.R_MINOR/o,c=Math.sqrt(1-h*h),d=Math.exp(-t.y/o),f=Math.PI/2-2*Math.atan(d),m=0,g=.1,y;m<15&&Math.abs(g)>1e-7;m++)y=c*Math.sin(f),y=Math.pow((1-y)/(1+y),c/2),g=Math.PI/2-2*Math.atan(d*y)-f,f+=g;return new j(f*r,t.x*r/o)}},mc={__proto__:null,LonLat:zr,Mercator:Ur,SphericalMercator:cr},gc=a({},te,{code:"EPSG:3395",projection:Ur,transformation:function(){var t=.5/(Math.PI*Ur.R);return oi(t,.5,-t,.5)}()}),sa=a({},te,{code:"EPSG:4326",projection:zr,transformation:oi(1/180,1,-1/180,.5)}),vc=a({},Ht,{projection:zr,transformation:oi(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,r){var o=r.lng-t.lng,h=r.lat-t.lat;return Math.sqrt(o*o+h*h)},infinite:!0});Ht.Earth=te,Ht.EPSG3395=gc,Ht.EPSG3857=fr,Ht.EPSG900913=Il,Ht.EPSG4326=sa,Ht.Simple=vc;var xt=si.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[p(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[p(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var r=t.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var o=this.getEvents();r.on(o,this),this.once("remove",function(){r.off(o,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});D.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var r=p(t);return this._layers[r]?this:(this._layers[r]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var r=p(t);return this._layers[r]?(this._loaded&&t.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return p(t)in this._layers},eachLayer:function(t,r){for(var o in this._layers)t.call(r,this._layers[o]);return this},_addLayers:function(t){t=t?ft(t)?t:[t]:[];for(var r=0,o=t.length;r<o;r++)this.addLayer(t[r])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[p(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var r=p(t);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,r=-1/0,o=this._getZoomSpan();for(var h in this._zoomBoundLayers){var c=this._zoomBoundLayers[h].options;t=c.minZoom===void 0?t:Math.min(t,c.minZoom),r=c.maxZoom===void 0?r:Math.max(r,c.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Me=xt.extend({initialize:function(t,r){U(this,r),this._layers={};var o,h;if(t)for(o=0,h=t.length;o<h;o++)this.addLayer(t[o])},addLayer:function(t){var r=this.getLayerId(t);return this._layers[r]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var r=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(t){var r=typeof t=="number"?t:this.getLayerId(t);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var r=Array.prototype.slice.call(arguments,1),o,h;for(o in this._layers)h=this._layers[o],h[t]&&h[t].apply(h,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,r){for(var o in this._layers)t.call(r,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return p(t)}}),yc=function(t,r){return new Me(t,r)},jt=Me.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Me.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Me.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new yt;for(var r in this._layers){var o=this._layers[r];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),wc=function(t,r){return new jt(t,r)},Ne=Zt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){U(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,r){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(o,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(h,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(t,r){var o=this.options,h=o[r+"Size"];typeof h=="number"&&(h=[h,h]);var c=C(h),d=C(r==="shadow"&&o.shadowAnchor||o.iconAnchor||c&&c.divideBy(2,!0));t.className="leaflet-marker-"+r+" "+(o.className||""),d&&(t.style.marginLeft=-d.x+"px",t.style.marginTop=-d.y+"px"),c&&(t.style.width=c.x+"px",t.style.height=c.y+"px")},_createImg:function(t,r){return r=r||document.createElement("img"),r.src=t,r},_getIconUrl:function(t){return P.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Tc(t){return new Ne(t)}var mi=Ne.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof mi.imagePath!="string"&&(mi.imagePath=this._detectIconPath()),(this.options.imagePath||mi.imagePath)+Ne.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var r=function(o,h,c){var d=h.exec(o);return d&&d[c]};return t=r(t,/^url\((['"])?(.+)\1\)$/,2),t&&r(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=z("div","leaflet-default-icon-path",document.body),r=ui(t,"background-image")||ui(t,"backgroundImage");if(document.body.removeChild(t),r=this._stripUrl(r),r)return r;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),oa=Rt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ee(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),O(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&q(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var r=this._marker,o=r._map,h=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,d=ge(r._icon),f=o.getPixelBounds(),m=o.getPixelOrigin(),g=vt(f.min._subtract(m).add(c),f.max._subtract(m).subtract(c));if(!g.contains(d)){var y=C((Math.max(g.max.x,d.x)-g.max.x)/(f.max.x-g.max.x)-(Math.min(g.min.x,d.x)-g.min.x)/(f.min.x-g.min.x),(Math.max(g.max.y,d.y)-g.max.y)/(f.max.y-g.max.y)-(Math.min(g.min.y,d.y)-g.min.y)/(f.min.y-g.min.y)).multiplyBy(h);o.panBy(y,{animate:!1}),this._draggable._newPos._add(y),this._draggable._startPos._add(y),J(r._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=gt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Pt(this._panRequest),this._panRequest=gt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var r=this._marker,o=r._shadow,h=ge(r._icon),c=r._map.layerPointToLatLng(h);o&&J(o,h),r._latlng=c,t.latlng=c,t.oldLatLng=this._oldLatLng,r.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Pt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),cn=xt.extend({options:{icon:new mi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,r){U(this,r),this._latlng=N(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var r=this._latlng;return this._latlng=N(t),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),h=!1;o!==this._icon&&(this._icon&&this._removeIcon(),h=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),O(o,r),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&k(o,"focus",this._panOnFocus,this);var c=t.icon.createShadow(this._shadow),d=!1;c!==this._shadow&&(this._removeShadow(),d=!0),c&&(O(c,r),c.alt=""),this._shadow=c,t.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&d&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&V(this._icon,"focus",this._panOnFocus,this),G(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&G(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&J(this._icon,t),this._shadow&&J(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(O(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),oa)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new oa(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&It(this._icon,t),this._shadow&&It(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var r=this.options.icon.options,o=r.iconSize?C(r.iconSize):C(0,0),h=r.iconAnchor?C(r.iconAnchor):C(0,0);t.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:o.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ec(t,r){return new cn(t,r)}var ie=xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return U(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),dn=ie.extend({options:{fill:!0,radius:10},initialize:function(t,r){U(this,r),this._latlng=N(t),this._radius=this.options.radius},setLatLng:function(t){var r=this._latlng;return this._latlng=N(t),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var r=t&&t.radius||this._radius;return ie.prototype.setStyle.call(this,t),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,r=this._radiusY||t,o=this._clickTolerance(),h=[t+o,r+o];this._pxBounds=new W(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pc(t,r){return new dn(t,r)}var Fr=dn.extend({initialize:function(t,r,o){if(typeof r=="number"&&(r=a({},o,{radius:r})),U(this,r),this._latlng=N(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new yt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ie.prototype.setStyle,_project:function(){var t=this._latlng.lng,r=this._latlng.lat,o=this._map,h=o.options.crs;if(h.distance===te.distance){var c=Math.PI/180,d=this._mRadius/te.R/c,f=o.project([r+d,t]),m=o.project([r-d,t]),g=f.add(m).divideBy(2),y=o.unproject(g).lat,T=Math.acos((Math.cos(d*c)-Math.sin(r*c)*Math.sin(y*c))/(Math.cos(r*c)*Math.cos(y*c)))/c;(isNaN(T)||T===0)&&(T=d/Math.cos(Math.PI/180*r)),this._point=g.subtract(o.getPixelOrigin()),this._radius=isNaN(T)?0:g.x-o.project([y,t-T]).x,this._radiusY=g.y-f.y}else{var S=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(S).x}this._updateBounds()}});function Ic(t,r,o){return new Fr(t,r,o)}var Vt=ie.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,r){U(this,r),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var r=1/0,o=null,h=_i,c,d,f=0,m=this._parts.length;f<m;f++)for(var g=this._parts[f],y=1,T=g.length;y<T;y++){c=g[y-1],d=g[y];var S=h(t,c,d,!0);S<r&&(r=S,o=h(t,c,d))}return o&&(o.distance=Math.sqrt(r)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ra(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,r){return r=r||this._defaultShape(),t=N(t),r.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new yt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var r=[],o=St(t),h=0,c=t.length;h<c;h++)o?(r[h]=N(t[h]),this._bounds.extend(r[h])):r[h]=this._convertLatLngs(t[h]);return r},_project:function(){var t=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),r=new x(t,t);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(t,r,o){var h=t[0]instanceof j,c=t.length,d,f;if(h){for(f=[],d=0;d<c;d++)f[d]=this._map.latLngToLayerPoint(t[d]),o.extend(f[d]);r.push(f)}else for(d=0;d<c;d++)this._projectLatlngs(t[d],r,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,o,h,c,d,f,m,g;for(o=0,c=0,d=this._rings.length;o<d;o++)for(g=this._rings[o],h=0,f=g.length;h<f-1;h++)m=ia(g[h],g[h+1],t,h,!0),m&&(r[c]=r[c]||[],r[c].push(m[0]),(m[1]!==g[h+1]||h===f-2)&&(r[c].push(m[1]),c++))}},_simplifyPoints:function(){for(var t=this._parts,r=this.options.smoothFactor,o=0,h=t.length;o<h;o++)t[o]=Qo(t[o],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,r){var o,h,c,d,f,m,g=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,d=this._parts.length;o<d;o++)for(m=this._parts[o],h=0,f=m.length,c=f-1;h<f;c=h++)if(!(!r&&h===0)&&ta(t,m[c],m[h])<=g)return!0;return!1}});function Sc(t,r){return new Vt(t,r)}Vt._flat=na;var De=Vt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var r=Vt.prototype._convertLatLngs.call(this,t),o=r.length;return o>=2&&r[0]instanceof j&&r[0].equals(r[o-1])&&r.pop(),r},_setLatLngs:function(t){Vt.prototype._setLatLngs.call(this,t),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,r=this.options.weight,o=new x(r,r);if(t=new W(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,c=this._rings.length,d;h<c;h++)d=Jo(this._rings[h],t,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var r=!1,o,h,c,d,f,m,g,y;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,g=this._parts.length;d<g;d++)for(o=this._parts[d],f=0,y=o.length,m=y-1;f<y;m=f++)h=o[f],c=o[m],h.y>t.y!=c.y>t.y&&t.x<(c.x-h.x)*(t.y-h.y)/(c.y-h.y)+h.x&&(r=!r);return r||Vt.prototype._containsPoint.call(this,t,!0)}});function Lc(t,r){return new De(t,r)}var $t=jt.extend({initialize:function(t,r){U(this,r),this._layers={},t&&this.addData(t)},addData:function(t){var r=ft(t)?t:t.features,o,h,c;if(r){for(o=0,h=r.length;o<h;o++)c=r[o],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var d=this.options;if(d.filter&&!d.filter(t))return this;var f=fn(t,d);return f?(f.feature=mn(t),f.defaultOptions=f.options,this.resetStyle(f),d.onEachFeature&&d.onEachFeature(t,f),this.addLayer(f)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=a({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(r){this._setLayerStyle(r,t)},this)},_setLayerStyle:function(t,r){t.setStyle&&(typeof r=="function"&&(r=r(t.feature)),t.setStyle(r))}});function fn(t,r){var o=t.type==="Feature"?t.geometry:t,h=o?o.coordinates:null,c=[],d=r&&r.pointToLayer,f=r&&r.coordsToLatLng||Zr,m,g,y,T;if(!h&&!o)return null;switch(o.type){case"Point":return m=f(h),aa(d,t,m,r);case"MultiPoint":for(y=0,T=h.length;y<T;y++)m=f(h[y]),c.push(aa(d,t,m,r));return new jt(c);case"LineString":case"MultiLineString":return g=pn(h,o.type==="LineString"?0:1,f),new Vt(g,r);case"Polygon":case"MultiPolygon":return g=pn(h,o.type==="Polygon"?1:2,f),new De(g,r);case"GeometryCollection":for(y=0,T=o.geometries.length;y<T;y++){var S=fn({geometry:o.geometries[y],type:"Feature",properties:t.properties},r);S&&c.push(S)}return new jt(c);case"FeatureCollection":for(y=0,T=o.features.length;y<T;y++){var R=fn(o.features[y],r);R&&c.push(R)}return new jt(c);default:throw new Error("Invalid GeoJSON object.")}}function aa(t,r,o,h){return t?t(r,o):new cn(o,h&&h.markersInheritOptions&&h)}function Zr(t){return new j(t[1],t[0],t[2])}function pn(t,r,o){for(var h=[],c=0,d=t.length,f;c<d;c++)f=r?pn(t[c],r-1,o):(o||Zr)(t[c]),h.push(f);return h}function Hr(t,r){return t=N(t),t.alt!==void 0?[F(t.lng,r),F(t.lat,r),F(t.alt,r)]:[F(t.lng,r),F(t.lat,r)]}function _n(t,r,o,h){for(var c=[],d=0,f=t.length;d<f;d++)c.push(r?_n(t[d],St(t[d])?0:r-1,o,h):Hr(t[d],h));return!r&&o&&c.length>0&&c.push(c[0].slice()),c}function Be(t,r){return t.feature?a({},t.feature,{geometry:r}):mn(r)}function mn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var jr={toGeoJSON:function(t){return Be(this,{type:"Point",coordinates:Hr(this.getLatLng(),t)})}};cn.include(jr),Fr.include(jr),dn.include(jr),Vt.include({toGeoJSON:function(t){var r=!St(this._latlngs),o=_n(this._latlngs,r?1:0,!1,t);return Be(this,{type:(r?"Multi":"")+"LineString",coordinates:o})}}),De.include({toGeoJSON:function(t){var r=!St(this._latlngs),o=r&&!St(this._latlngs[0]),h=_n(this._latlngs,o?2:r?1:0,!0,t);return r||(h=[h]),Be(this,{type:(o?"Multi":"")+"Polygon",coordinates:h})}}),Me.include({toMultiPoint:function(t){var r=[];return this.eachLayer(function(o){r.push(o.toGeoJSON(t).geometry.coordinates)}),Be(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(t){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(t);var o=r==="GeometryCollection",h=[];return this.eachLayer(function(c){if(c.toGeoJSON){var d=c.toGeoJSON(t);if(o)h.push(d.geometry);else{var f=mn(d);f.type==="FeatureCollection"?h.push.apply(h,f.features):h.push(f)}}}),o?Be(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function ha(t,r){return new $t(t,r)}var bc=ha,gn=xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,r,o){this._url=t,this._bounds=X(r),U(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(O(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){G(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Oe(this._image),this},bringToBack:function(){return this._map&&Re(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=X(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",r=this._image=t?this._url:z("img");if(O(r,"leaflet-image-layer"),this._zoomAnimated&&O(r,"leaflet-zoom-animated"),this.options.className&&O(r,this.options.className),r.onselectstart=I,r.onmousemove=I,r.onload=l(this.fire,this,"load"),r.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(t){var r=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;me(this._image,o,r)},_reset:function(){var t=this._image,r=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=r.getSize();J(t,r.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){It(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Cc=function(t,r,o){return new gn(t,r,o)},ua=gn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",r=this._image=t?this._url:z("video");if(O(r,"leaflet-image-layer"),this._zoomAnimated&&O(r,"leaflet-zoom-animated"),this.options.className&&O(r,this.options.className),r.onselectstart=I,r.onmousemove=I,r.onloadeddata=l(this.fire,this,"load"),t){for(var o=r.getElementsByTagName("source"),h=[],c=0;c<o.length;c++)h.push(o[c].src);this._url=o.length>0?h:[r.src];return}ft(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var d=0;d<this._url.length;d++){var f=z("source");f.src=this._url[d],r.appendChild(f)}}});function Ac(t,r,o){return new ua(t,r,o)}var la=gn.extend({_initImage:function(){var t=this._image=this._url;O(t,"leaflet-image-layer"),this._zoomAnimated&&O(t,"leaflet-zoom-animated"),this.options.className&&O(t,this.options.className),t.onselectstart=I,t.onmousemove=I}});function xc(t,r,o){return new la(t,r,o)}var Mt=xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,r){t&&(t instanceof j||ft(t))?(this._latlng=N(t),U(this,r)):(U(this,t),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&It(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&It(this._container,1),this.bringToFront(),this.options.interactive&&(O(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(It(this._container,0),this._removeTimeout=setTimeout(l(G,void 0,this._container),200)):G(this._container),this.options.interactive&&(q(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=N(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Oe(this._container),this},bringToBack:function(){return this._map&&Re(this._container),this},_prepareOpen:function(t){var r=this._source;if(!r._map)return!1;if(r instanceof jt){r=null;var o=this._source._layers;for(var h in o)if(o[h]._map){r=o[h];break}if(!r)return!1;this._source=r}if(!t)if(r.getCenter)t=r.getCenter();else if(r.getLatLng)t=r.getLatLng();else if(r.getBounds)t=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")t.innerHTML=r;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),r=C(this.options.offset),o=this._getAnchor();this._zoomAnimated?J(this._container,t.add(o)):r=r.add(t).add(o);var h=this._containerBottom=-r.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=h+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});D.include({_initOverlay:function(t,r,o,h){var c=r;return c instanceof t||(c=new t(h).setContent(r)),o&&c.setLatLng(o),c}}),xt.include({_initOverlay:function(t,r,o,h){var c=o;return c instanceof t?(U(c,h),c._source=this):(c=r&&!h?r:new t(h,this),c.setContent(o)),c}});var vn=Mt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Mt.prototype.openOn.call(this,t)},onAdd:function(t){Mt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ie||this._source.on("preclick",ve))},onRemove:function(t){Mt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ie||this._source.off("preclick",ve))},getEvents:function(){var t=Mt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",r=this._container=z("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=z("div",t+"-content-wrapper",r);if(this._contentNode=z("div",t+"-content",o),fi(r),Or(this._contentNode),k(r,"contextmenu",ve),this._tipContainer=z("div",t+"-tip-container",r),this._tip=z("div",t+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=z("a",t+"-close-button",r);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',k(h,"click",function(c){rt(c),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,r=t.style;r.width="",r.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),r.width=o+1+"px",r.whiteSpace="",r.height="";var h=t.offsetHeight,c=this.options.maxHeight,d="leaflet-popup-scrolled";c&&h>c?(r.height=c+"px",O(t,d)):q(t,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();J(this._container,r.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,r=parseInt(ui(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+r,h=this._containerWidth,c=new x(this._containerLeft,-o-this._containerBottom);c._add(ge(this._container));var d=t.layerPointToContainerPoint(c),f=C(this.options.autoPanPadding),m=C(this.options.autoPanPaddingTopLeft||f),g=C(this.options.autoPanPaddingBottomRight||f),y=t.getSize(),T=0,S=0;d.x+h+g.x>y.x&&(T=d.x+h-y.x+g.x),d.x-T-m.x<0&&(T=d.x-m.x),d.y+o+g.y>y.y&&(S=d.y+o-y.y+g.y),d.y-S-m.y<0&&(S=d.y-m.y),(T||S)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([T,S]))}},_getAnchor:function(){return C(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kc=function(t,r){return new vn(t,r)};D.mergeOptions({closePopupOnClick:!0}),D.include({openPopup:function(t,r,o){return this._initOverlay(vn,t,r,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),xt.include({bindPopup:function(t,r){return this._popup=this._initOverlay(vn,this._popup,t,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof jt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ye(t);var r=t.layer||t.target;if(this._popup._source===r&&!(r instanceof ie)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=r,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var yn=Mt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Mt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Mt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Mt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",r=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=z("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var r,o,h=this._map,c=this._container,d=h.latLngToContainerPoint(h.getCenter()),f=h.layerPointToContainerPoint(t),m=this.options.direction,g=c.offsetWidth,y=c.offsetHeight,T=C(this.options.offset),S=this._getAnchor();m==="top"?(r=g/2,o=y):m==="bottom"?(r=g/2,o=0):m==="center"?(r=g/2,o=y/2):m==="right"?(r=0,o=y/2):m==="left"?(r=g,o=y/2):f.x<d.x?(m="right",r=0,o=y/2):(m="left",r=g+(T.x+S.x)*2,o=y/2),t=t.subtract(C(r,o,!0)).add(T).add(S),q(c,"leaflet-tooltip-right"),q(c,"leaflet-tooltip-left"),q(c,"leaflet-tooltip-top"),q(c,"leaflet-tooltip-bottom"),O(c,"leaflet-tooltip-"+m),J(c,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&It(this._container,t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(r)},_getAnchor:function(){return C(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Oc=function(t,r){return new yn(t,r)};D.include({openTooltip:function(t,r,o){return this._initOverlay(yn,t,r,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),xt.include({bindTooltip:function(t,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yn,this._tooltip,t,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var r=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[r](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof jt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var r=typeof t.getElement=="function"&&t.getElement();r&&(k(r,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),k(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var r=typeof t.getElement=="function"&&t.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var r=t.latlng,o,h;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),h=this._map.containerPointToLayerPoint(o),r=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(r)}});var ca=Ne.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var r=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(sn(r),r.appendChild(o.html)):r.innerHTML=o.html!==!1?o.html:"",o.bgPos){var h=C(o.bgPos);r.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Rc(t){return new ca(t)}Ne.Default=mi;var gi=xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:P.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){U(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),G(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Re(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof x?t:new x(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var r=this.getPane().children,o=-t(-1/0,1/0),h=0,c=r.length,d;h<c;h++)d=r[h].style.zIndex,r[h]!==this._container&&d&&(o=t(o,+d));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!P.ielt9){It(this._container,this.options.opacity);var t=+new Date,r=!1,o=!1;for(var h in this._tiles){var c=this._tiles[h];if(!(!c.current||!c.loaded)){var d=Math.min(1,(t-c.loaded)/200);It(c.el,d),d<1?r=!0:(c.active?o=!0:this._onOpaqueTile(c),c.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),r&&(Pt(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=z("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,r=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=r-Math.abs(t-o),this._onUpdateLevel(o)):(G(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var h=this._levels[t],c=this._map;return h||(h=this._levels[t]={},h.el=z("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=r,h.origin=c.project(c.unproject(c.getPixelOrigin()),t).round(),h.zoom=t,this._setZoomTransform(h,c.getCenter(),c.getZoom()),I(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var t,r,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)r=this._tiles[t],r.retain=r.current;for(t in this._tiles)if(r=this._tiles[t],r.current&&!r.active){var h=r.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var r in this._tiles)this._tiles[r].coords.z===t&&this._removeTile(r)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)G(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,r,o,h){var c=Math.floor(t/2),d=Math.floor(r/2),f=o-1,m=new x(+c,+d);m.z=+f;var g=this._tileCoordsToKey(m),y=this._tiles[g];return y&&y.active?(y.retain=!0,!0):(y&&y.loaded&&(y.retain=!0),f>h?this._retainParent(c,d,f,h):!1)},_retainChildren:function(t,r,o,h){for(var c=2*t;c<2*t+2;c++)for(var d=2*r;d<2*r+2;d++){var f=new x(c,d);f.z=o+1;var m=this._tileCoordsToKey(f),g=this._tiles[m];if(g&&g.active){g.retain=!0;continue}else g&&g.loaded&&(g.retain=!0);o+1<h&&this._retainChildren(c,d,o+1,h)}},_resetView:function(t){var r=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var r=this.options;return r.minNativeZoom!==void 0&&t<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<t?r.maxNativeZoom:t},_setView:function(t,r,o,h){var c=Math.round(r);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var d=this.options.updateWhenZooming&&c!==this._tileZoom;(!h||d)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,r)},_setZoomTransforms:function(t,r){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,r)},_setZoomTransform:function(t,r,o){var h=this._map.getZoomScale(o,t.zoom),c=t.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(r,o)).round();P.any3d?me(t.el,c,h):J(t.el,c)},_resetGrid:function(){var t=this._map,r=t.options.crs,o=this._tileSize=this.getTileSize(),h=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,r.wrapLng[0]],h).x/o.x),Math.ceil(t.project([0,r.wrapLng[1]],h).x/o.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([r.wrapLat[0],0],h).y/o.x),Math.ceil(t.project([r.wrapLat[1],0],h).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var r=this._map,o=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),h=r.getZoomScale(o,this._tileZoom),c=r.project(t,this._tileZoom).floor(),d=r.getSize().divideBy(h*2);return new W(c.subtract(d),c.add(d))},_update:function(t){var r=this._map;if(r){var o=this._clampZoom(r.getZoom());if(t===void 0&&(t=r.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(t),c=this._pxBoundsToTileRange(h),d=c.getCenter(),f=[],m=this.options.keepBuffer,g=new W(c.getBottomLeft().subtract([m,-m]),c.getTopRight().add([m,-m]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var y in this._tiles){var T=this._tiles[y].coords;(T.z!==this._tileZoom||!g.contains(new x(T.x,T.y)))&&(this._tiles[y].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var S=c.min.y;S<=c.max.y;S++)for(var R=c.min.x;R<=c.max.x;R++){var pt=new x(R,S);if(pt.z=this._tileZoom,!!this._isValidTile(pt)){var et=this._tiles[this._tileCoordsToKey(pt)];et?et.current=!0:f.push(pt)}}if(f.sort(function(wt,Ue){return wt.distanceTo(d)-Ue.distanceTo(d)}),f.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Lt=document.createDocumentFragment();for(R=0;R<f.length;R++)this._addTile(f[R],Lt);this._level.el.appendChild(Lt)}}}},_isValidTile:function(t){var r=this._map.options.crs;if(!r.infinite){var o=this._globalTileRange;if(!r.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!r.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(t);return X(this.options.bounds).overlaps(h)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var r=this._map,o=this.getTileSize(),h=t.scaleBy(o),c=h.add(o),d=r.unproject(h,t.z),f=r.unproject(c,t.z);return[d,f]},_tileCoordsToBounds:function(t){var r=this._tileCoordsToNwSe(t),o=new yt(r[0],r[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var r=t.split(":"),o=new x(+r[0],+r[1]);return o.z=+r[2],o},_removeTile:function(t){var r=this._tiles[t];r&&(G(r.el),delete this._tiles[t],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){O(t,"leaflet-tile");var r=this.getTileSize();t.style.width=r.x+"px",t.style.height=r.y+"px",t.onselectstart=I,t.onmousemove=I,P.ielt9&&this.options.opacity<1&&It(t,this.options.opacity)},_addTile:function(t,r){var o=this._getTilePos(t),h=this._tileCoordsToKey(t),c=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(c),this.createTile.length<2&&gt(l(this._tileReady,this,t,null,c)),J(c,o),this._tiles[h]={el:c,coords:t,current:!0},r.appendChild(c),this.fire("tileloadstart",{tile:c,coords:t})},_tileReady:function(t,r,o){r&&this.fire("tileerror",{error:r,tile:o,coords:t});var h=this._tileCoordsToKey(t);o=this._tiles[h],o&&(o.loaded=+new Date,this._map._fadeAnimated?(It(o.el,0),Pt(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),r||(O(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),P.ielt9||!this._map._fadeAnimated?gt(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var r=new x(this._wrapX?E(t.x,this._wrapX):t.x,this._wrapY?E(t.y,this._wrapY):t.y);return r.z=t.z,r},_pxBoundsToTileRange:function(t){var r=this.getTileSize();return new W(t.min.unscaleBy(r).floor(),t.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Mc(t){return new gi(t)}var ze=gi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,r){this._url=t,r=U(this,r),r.detectRetina&&P.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,r){return this._url===t&&r===void 0&&(r=!0),this._url=t,r||this.redraw(),this},createTile:function(t,r){var o=document.createElement("img");return k(o,"load",l(this._tileOnLoad,this,r,o)),k(o,"error",l(this._tileOnError,this,r,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var r={r:P.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(r.y=o),r["-y"]=o}return ni(this._url,a(r,this.options))},_tileOnLoad:function(t,r){P.ielt9?setTimeout(l(t,this,null,r),0):t(null,r)},_tileOnError:function(t,r,o){var h=this.options.errorTileUrl;h&&r.getAttribute("src")!==h&&(r.src=h),t(o,r)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,r=this.options.maxZoom,o=this.options.zoomReverse,h=this.options.zoomOffset;return o&&(t=r-t),t+h},_getSubdomain:function(t){var r=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var t,r;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(r=this._tiles[t].el,r.onload=I,r.onerror=I,!r.complete)){r.src=fe;var o=this._tiles[t].coords;G(r),delete this._tiles[t],this.fire("tileabort",{tile:r,coords:o})}},_removeTile:function(t){var r=this._tiles[t];if(r)return r.el.setAttribute("src",fe),gi.prototype._removeTile.call(this,t)},_tileReady:function(t,r,o){if(!(!this._map||o&&o.getAttribute("src")===fe))return gi.prototype._tileReady.call(this,t,r,o)}});function da(t,r){return new ze(t,r)}var fa=ze.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,r){this._url=t;var o=a({},this.defaultWmsParams);for(var h in r)h in this.options||(o[h]=r[h]);r=U(this,r);var c=r.detectRetina&&P.retina?2:1,d=this.getTileSize();o.width=d.x*c,o.height=d.y*c,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,ze.prototype.onAdd.call(this,t)},getTileUrl:function(t){var r=this._tileCoordsToNwSe(t),o=this._crs,h=vt(o.project(r[0]),o.project(r[1])),c=h.min,d=h.max,f=(this._wmsVersion>=1.3&&this._crs===sa?[c.y,c.x,d.y,d.x]:[c.x,c.y,d.x,d.y]).join(","),m=ze.prototype.getTileUrl.call(this,t);return m+Ae(this.wmsParams,m,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+f},setParams:function(t,r){return a(this.wmsParams,t),r||this.redraw(),this}});function Nc(t,r){return new fa(t,r)}ze.WMS=fa,da.wms=Nc;var Wt=xt.extend({options:{padding:.1},initialize:function(t){U(this,t),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),O(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,r){var o=this._map.getZoomScale(r,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,r),d=h.multiplyBy(-o).add(c).subtract(this._map._getNewPixelOrigin(t,r));P.any3d?me(this._container,d,o):J(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,r=this._map.getSize(),o=this._map.containerPointToLayerPoint(r.multiplyBy(-t)).round();this._bounds=new W(o,o.add(r.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),pa=Wt.extend({options:{tolerance:0},getEvents:function(){var t=Wt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");k(t,"mousemove",this._onMouseMove,this),k(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),k(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Pt(this._redrawRequest),delete this._ctx,G(this._container),V(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var r in this._layers)t=this._layers[r],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wt.prototype._update.call(this);var t=this._bounds,r=this._container,o=t.getSize(),h=P.retina?2:1;J(r,t.min),r.width=h*o.x,r.height=h*o.y,r.style.width=o.x+"px",r.style.height=o.y+"px",P.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Wt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[p(t)]=t;var r=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var r=t._order,o=r.next,h=r.prev;o?o.prev=h:this._drawLast=h,h?h.next=o:this._drawFirst=o,delete t._order,delete this._layers[p(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var r=t.options.dashArray.split(/[, ]+/),o=[],h,c;for(c=0;c<r.length;c++){if(h=Number(r[c]),isNaN(h))return;o.push(h)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||gt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var r=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(t._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(t._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var r=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,r=this._redrawBounds;if(this._ctx.save(),r){var o=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)t=h.layer,(!r||t._pxBounds&&t._pxBounds.intersects(r))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,r){if(this._drawing){var o,h,c,d,f=t._parts,m=f.length,g=this._ctx;if(m){for(g.beginPath(),o=0;o<m;o++){for(h=0,c=f[o].length;h<c;h++)d=f[o][h],g[h?"lineTo":"moveTo"](d.x,d.y);r&&g.closePath()}this._fillStroke(g,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var r=t._point,o=this._ctx,h=Math.max(Math.round(t._radius),1),c=(Math.max(Math.round(t._radiusY),1)||h)/h;c!==1&&(o.save(),o.scale(1,c)),o.beginPath(),o.arc(r.x,r.y/c,h,0,Math.PI*2,!1),c!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,r){var o=r.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(r.options&&r.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var r=this._map.mouseEventToLayerPoint(t),o,h,c=this._drawFirst;c;c=c.next)o=c.layer,o.options.interactive&&o._containsPoint(r)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(h=o);this._fireEvent(h?[h]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,r)}},_handleMouseOut:function(t){var r=this._hoveredLayer;r&&(q(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,r){if(!this._mouseHoverThrottled){for(var o,h,c=this._drawFirst;c;c=c.next)o=c.layer,o.options.interactive&&o._containsPoint(r)&&(h=o);h!==this._hoveredLayer&&(this._handleMouseOut(t),h&&(O(this._container,"leaflet-interactive"),this._fireEvent([h],t,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,r,o){this._map._fireDOMEvent(r,o||r.type,t)},_bringToFront:function(t){var r=t._order;if(r){var o=r.next,h=r.prev;if(o)o.prev=h;else return;h?h.next=o:o&&(this._drawFirst=o),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(t)}},_bringToBack:function(t){var r=t._order;if(r){var o=r.next,h=r.prev;if(h)h.next=o;else return;o?o.prev=h:h&&(this._drawLast=h),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(t)}}});function _a(t){return P.canvas?new pa(t):null}var vi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Dc={_initContainer:function(){this._container=z("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var r=t._container=vi("shape");O(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",t._path=vi("path"),r.appendChild(t._path),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){var r=t._container;this._container.appendChild(r),t.options.interactive&&t.addInteractiveTarget(r)},_removePath:function(t){var r=t._container;G(r),t.removeInteractiveTarget(r),delete this._layers[p(t)]},_updateStyle:function(t){var r=t._stroke,o=t._fill,h=t.options,c=t._container;c.stroked=!!h.stroke,c.filled=!!h.fill,h.stroke?(r||(r=t._stroke=vi("stroke")),c.appendChild(r),r.weight=h.weight+"px",r.color=h.color,r.opacity=h.opacity,h.dashArray?r.dashStyle=ft(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=h.lineCap.replace("butt","flat"),r.joinstyle=h.lineJoin):r&&(c.removeChild(r),t._stroke=null),h.fill?(o||(o=t._fill=vi("fill")),c.appendChild(o),o.color=h.fillColor||h.color,o.opacity=h.fillOpacity):o&&(c.removeChild(o),t._fill=null)},_updateCircle:function(t){var r=t._point.round(),o=Math.round(t._radius),h=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+r.x+","+r.y+" "+o+","+h+" 0,"+65535*360)},_setPath:function(t,r){t._path.v=r},_bringToFront:function(t){Oe(t._container)},_bringToBack:function(t){Re(t._container)}},wn=P.vml?vi:yo,yi=Wt.extend({_initContainer:function(){this._container=wn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){G(this._container),V(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wt.prototype._update.call(this);var t=this._bounds,r=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,o.setAttribute("width",r.x),o.setAttribute("height",r.y)),J(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(t){var r=t._path=wn("path");t.options.className&&O(r,t.options.className),t.options.interactive&&O(r,"leaflet-interactive"),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){G(t._path),t.removeInteractiveTarget(t._path),delete this._layers[p(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var r=t._path,o=t.options;r&&(o.stroke?(r.setAttribute("stroke",o.color),r.setAttribute("stroke-opacity",o.opacity),r.setAttribute("stroke-width",o.weight),r.setAttribute("stroke-linecap",o.lineCap),r.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?r.setAttribute("stroke-dasharray",o.dashArray):r.removeAttribute("stroke-dasharray"),o.dashOffset?r.setAttribute("stroke-dashoffset",o.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),o.fill?(r.setAttribute("fill",o.fillColor||o.color),r.setAttribute("fill-opacity",o.fillOpacity),r.setAttribute("fill-rule",o.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(t,r){this._setPath(t,wo(t._parts,r))},_updateCircle:function(t){var r=t._point,o=Math.max(Math.round(t._radius),1),h=Math.max(Math.round(t._radiusY),1)||o,c="a"+o+","+h+" 0 1,0 ",d=t._empty()?"M0 0":"M"+(r.x-o)+","+r.y+c+o*2+",0 "+c+-o*2+",0 ";this._setPath(t,d)},_setPath:function(t,r){t._path.setAttribute("d",r)},_bringToFront:function(t){Oe(t._path)},_bringToBack:function(t){Re(t._path)}});P.vml&&yi.include(Dc);function ma(t){return P.svg||P.vml?new yi(t):null}D.include({getRenderer:function(t){var r=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var r=this._paneRenderers[t];return r===void 0&&(r=this._createRenderer({pane:t}),this._paneRenderers[t]=r),r},_createRenderer:function(t){return this.options.preferCanvas&&_a(t)||ma(t)}});var ga=De.extend({initialize:function(t,r){De.prototype.initialize.call(this,this._boundsToLatLngs(t),r)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=X(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Bc(t,r){return new ga(t,r)}yi.create=wn,yi.pointsToPath=wo,$t.geometryToLayer=fn,$t.coordsToLatLng=Zr,$t.coordsToLatLngs=pn,$t.latLngToCoords=Hr,$t.latLngsToCoords=_n,$t.getFeature=Be,$t.asFeature=mn,D.mergeOptions({boxZoom:!0});var va=Rt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){k(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){V(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){G(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),li(),Ir(),this._startPoint=this._map.mouseEventToContainerPoint(t),k(document,{contextmenu:ye,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=z("div","leaflet-zoom-box",this._container),O(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var r=new W(this._point,this._startPoint),o=r.getSize();J(this._box,r.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(G(this._box),q(this._container,"leaflet-crosshair")),ci(),Sr(),V(document,{contextmenu:ye,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var r=new yt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});D.addInitHook("addHandler","boxZoom",va),D.mergeOptions({doubleClickZoom:!0});var ya=Rt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var r=this._map,o=r.getZoom(),h=r.options.zoomDelta,c=t.originalEvent.shiftKey?o-h:o+h;r.options.doubleClickZoom==="center"?r.setZoom(c):r.setZoomAround(t.containerPoint,c)}});D.addInitHook("addHandler","doubleClickZoom",ya),D.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var wa=Rt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ee(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}O(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){q(this._map._container,"leaflet-grab"),q(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=X(this._map.options.maxBounds);this._offsetLimit=vt(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var r=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(r),this._prunePositions(r)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,r){return t-(t-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;t.x<r.min.x&&(t.x=this._viscousLimit(t.x,r.min.x)),t.y<r.min.y&&(t.y=this._viscousLimit(t.y,r.min.y)),t.x>r.max.x&&(t.x=this._viscousLimit(t.x,r.max.x)),t.y>r.max.y&&(t.y=this._viscousLimit(t.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,r=Math.round(t/2),o=this._initialWorldOffset,h=this._draggable._newPos.x,c=(h-r+o)%t+r-o,d=(h+r+o)%t-r-o,f=Math.abs(c+o)<Math.abs(d+o)?c:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=f},_onDragEnd:function(t){var r=this._map,o=r.options,h=!o.inertia||t.noInertia||this._times.length<2;if(r.fire("dragend",t),h)r.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,f=o.easeLinearity,m=c.multiplyBy(f/d),g=m.distanceTo([0,0]),y=Math.min(o.inertiaMaxSpeed,g),T=m.multiplyBy(y/g),S=y/(o.inertiaDeceleration*f),R=T.multiplyBy(-S/2).round();!R.x&&!R.y?r.fire("moveend"):(R=r._limitOffset(R,r.options.maxBounds),gt(function(){r.panBy(R,{duration:S,easeLinearity:f,noMoveStart:!0,animate:!0})}))}}});D.addInitHook("addHandler","dragging",wa),D.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ta=Rt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),k(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),V(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,r=document.documentElement,o=t.scrollTop||r.scrollTop,h=t.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(h,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var r=this._panKeys={},o=this.keyCodes,h,c;for(h=0,c=o.left.length;h<c;h++)r[o.left[h]]=[-1*t,0];for(h=0,c=o.right.length;h<c;h++)r[o.right[h]]=[t,0];for(h=0,c=o.down.length;h<c;h++)r[o.down[h]]=[0,t];for(h=0,c=o.up.length;h<c;h++)r[o.up[h]]=[0,-1*t]},_setZoomDelta:function(t){var r=this._zoomKeys={},o=this.keyCodes,h,c;for(h=0,c=o.zoomIn.length;h<c;h++)r[o.zoomIn[h]]=t;for(h=0,c=o.zoomOut.length;h<c;h++)r[o.zoomOut[h]]=-t},_addHooks:function(){k(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){V(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var r=t.keyCode,o=this._map,h;if(r in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(h=this._panKeys[r],t.shiftKey&&(h=C(h).multiplyBy(3)),o.options.maxBounds&&(h=o._limitOffset(C(h),o.options.maxBounds)),o.options.worldCopyJump){var c=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(h)));o.panTo(c)}else o.panBy(h)}else if(r in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;ye(t)}}});D.addInitHook("addHandler","keyboard",Ta),D.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ea=Rt.extend({addHooks:function(){k(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){V(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var r=Wo(t),o=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var h=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),h),ye(t)},_performZoom:function(){var t=this._map,r=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,d=o?Math.ceil(c/o)*o:c,f=t._limitZoom(r+(this._delta>0?d:-d))-r;this._delta=0,this._startTime=null,f&&(t.options.scrollWheelZoom==="center"?t.setZoom(r+f):t.setZoomAround(this._lastMousePos,r+f))}});D.addInitHook("addHandler","scrollWheelZoom",Ea);var zc=600;D.mergeOptions({tapHold:P.touchNative&&P.safari&&P.mobile,tapTolerance:15});var Pa=Rt.extend({addHooks:function(){k(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){V(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var r=t.touches[0];this._startPos=this._newPos=new x(r.clientX,r.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(k(document,"touchend",rt),k(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),zc),k(document,"touchend touchcancel contextmenu",this._cancel,this),k(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){V(document,"touchend",rt),V(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),V(document,"touchend touchcancel contextmenu",this._cancel,this),V(document,"touchmove",this._onMove,this)},_onMove:function(t){var r=t.touches[0];this._newPos=new x(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,r){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});o._simulated=!0,r.target.dispatchEvent(o)}});D.addInitHook("addHandler","tapHold",Pa),D.mergeOptions({touchZoom:P.touch,bounceAtZoomLimits:!0});var Ia=Rt.extend({addHooks:function(){O(this._map._container,"leaflet-touch-zoom"),k(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){q(this._map._container,"leaflet-touch-zoom"),V(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var r=this._map;if(!(!t.touches||t.touches.length!==2||r._animatingZoom||this._zooming)){var o=r.mouseEventToContainerPoint(t.touches[0]),h=r.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(o.add(h)._divideBy(2))),this._startDist=o.distanceTo(h),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),k(document,"touchmove",this._onTouchMove,this),k(document,"touchend touchcancel",this._onTouchEnd,this),rt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var r=this._map,o=r.mouseEventToContainerPoint(t.touches[0]),h=r.mouseEventToContainerPoint(t.touches[1]),c=o.distanceTo(h)/this._startDist;if(this._zoom=r.getScaleZoom(c,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&c<1||this._zoom>r.getMaxZoom()&&c>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var d=o._add(h)._divideBy(2)._subtract(this._centerPoint);if(c===1&&d.x===0&&d.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),Pt(this._animRequest);var f=l(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=gt(f,this,!0),rt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Pt(this._animRequest),V(document,"touchmove",this._onTouchMove,this),V(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});D.addInitHook("addHandler","touchZoom",Ia),D.BoxZoom=va,D.DoubleClickZoom=ya,D.Drag=wa,D.Keyboard=Ta,D.ScrollWheelZoom=Ea,D.TapHold=Pa,D.TouchZoom=Ia,n.Bounds=W,n.Browser=P,n.CRS=Ht,n.Canvas=pa,n.Circle=Fr,n.CircleMarker=dn,n.Class=Zt,n.Control=At,n.DivIcon=ca,n.DivOverlay=Mt,n.DomEvent=ic,n.DomUtil=tc,n.Draggable=ee,n.Evented=si,n.FeatureGroup=jt,n.GeoJSON=$t,n.GridLayer=gi,n.Handler=Rt,n.Icon=Ne,n.ImageOverlay=gn,n.LatLng=j,n.LatLngBounds=yt,n.Layer=xt,n.LayerGroup=Me,n.LineUtil=_c,n.Map=D,n.Marker=cn,n.Mixin=uc,n.Path=ie,n.Point=x,n.PolyUtil=lc,n.Polygon=De,n.Polyline=Vt,n.Popup=vn,n.PosAnimation=Go,n.Projection=mc,n.Rectangle=ga,n.Renderer=Wt,n.SVG=yi,n.SVGOverlay=la,n.TileLayer=ze,n.Tooltip=yn,n.Transformation=dr,n.Util=El,n.VideoOverlay=ua,n.bind=l,n.bounds=vt,n.canvas=_a,n.circle=Ic,n.circleMarker=Pc,n.control=pi,n.divIcon=Rc,n.extend=a,n.featureGroup=wc,n.geoJSON=ha,n.geoJson=bc,n.gridLayer=Mc,n.icon=Tc,n.imageOverlay=Cc,n.latLng=N,n.latLngBounds=X,n.layerGroup=yc,n.map=nc,n.marker=Ec,n.point=C,n.polygon=Lc,n.polyline=Sc,n.popup=kc,n.rectangle=Bc,n.setOptions=U,n.stamp=p,n.svg=ma,n.svgOverlay=xc,n.tileLayer=da,n.tooltip=Oc,n.transformation=oi,n.version=s,n.videoOverlay=Ac;var Uc=window.L;n.noConflict=function(){return window.L=Uc,this},window.L=n})})(yh,yh.exports);
